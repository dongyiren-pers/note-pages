<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第5章 反射机制 | 后端技术栈笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="/note-pages//s0.pstatp.com/cdn/expire-1-M/jquery/3.4.0/jquery.min.js"></script>
    <script src="/note-pages//s0.pstatp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" href="/note-pages//s0.pstatp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">
    <meta name="description" content="BackEnd Notes">
    
    <link rel="preload" href="/note-pages/assets/css/0.styles.167a34c7.css" as="style"><link rel="preload" href="/note-pages/assets/js/app.05dcbd87.js" as="script"><link rel="preload" href="/note-pages/assets/js/3.4a2f67fd.js" as="script"><link rel="preload" href="/note-pages/assets/js/2.ab82720e.js" as="script"><link rel="preload" href="/note-pages/assets/js/141.c09f054f.js" as="script"><link rel="prefetch" href="/note-pages/assets/js/10.e11a80d9.js"><link rel="prefetch" href="/note-pages/assets/js/100.489cf69a.js"><link rel="prefetch" href="/note-pages/assets/js/101.560e37ea.js"><link rel="prefetch" href="/note-pages/assets/js/102.baaa4f6a.js"><link rel="prefetch" href="/note-pages/assets/js/103.262b6423.js"><link rel="prefetch" href="/note-pages/assets/js/104.ac33d7ce.js"><link rel="prefetch" href="/note-pages/assets/js/105.5e6ce18f.js"><link rel="prefetch" href="/note-pages/assets/js/106.a69322ef.js"><link rel="prefetch" href="/note-pages/assets/js/107.6cdb78ee.js"><link rel="prefetch" href="/note-pages/assets/js/108.1d720289.js"><link rel="prefetch" href="/note-pages/assets/js/109.58f7297c.js"><link rel="prefetch" href="/note-pages/assets/js/11.241a46da.js"><link rel="prefetch" href="/note-pages/assets/js/110.9cef761d.js"><link rel="prefetch" href="/note-pages/assets/js/111.c782138c.js"><link rel="prefetch" href="/note-pages/assets/js/112.40cb3b1a.js"><link rel="prefetch" href="/note-pages/assets/js/113.c367e40a.js"><link rel="prefetch" href="/note-pages/assets/js/114.a4a75db5.js"><link rel="prefetch" href="/note-pages/assets/js/115.a73cd469.js"><link rel="prefetch" href="/note-pages/assets/js/116.ad853155.js"><link rel="prefetch" href="/note-pages/assets/js/117.a82b2649.js"><link rel="prefetch" href="/note-pages/assets/js/118.8f896dd0.js"><link rel="prefetch" href="/note-pages/assets/js/119.374482b1.js"><link rel="prefetch" href="/note-pages/assets/js/12.ebe220d5.js"><link rel="prefetch" href="/note-pages/assets/js/120.89698284.js"><link rel="prefetch" href="/note-pages/assets/js/121.cbe50685.js"><link rel="prefetch" href="/note-pages/assets/js/122.7de2ac51.js"><link rel="prefetch" href="/note-pages/assets/js/123.a2d16009.js"><link rel="prefetch" href="/note-pages/assets/js/124.e1ba7cbe.js"><link rel="prefetch" href="/note-pages/assets/js/125.4e1e6d6a.js"><link rel="prefetch" href="/note-pages/assets/js/126.3db22af3.js"><link rel="prefetch" href="/note-pages/assets/js/127.937f4ffc.js"><link rel="prefetch" href="/note-pages/assets/js/128.0bad2e20.js"><link rel="prefetch" href="/note-pages/assets/js/129.75a99d25.js"><link rel="prefetch" href="/note-pages/assets/js/13.5ee7bef5.js"><link rel="prefetch" href="/note-pages/assets/js/130.599b6d3d.js"><link rel="prefetch" href="/note-pages/assets/js/131.687214bf.js"><link rel="prefetch" href="/note-pages/assets/js/132.8295c067.js"><link rel="prefetch" href="/note-pages/assets/js/133.854d61c0.js"><link rel="prefetch" href="/note-pages/assets/js/134.f3fc20e1.js"><link rel="prefetch" href="/note-pages/assets/js/135.2a5a690d.js"><link rel="prefetch" href="/note-pages/assets/js/136.6ba30378.js"><link rel="prefetch" href="/note-pages/assets/js/137.80d7c511.js"><link rel="prefetch" href="/note-pages/assets/js/138.0a25898e.js"><link rel="prefetch" href="/note-pages/assets/js/139.fb3c377f.js"><link rel="prefetch" href="/note-pages/assets/js/14.a561f8b3.js"><link rel="prefetch" href="/note-pages/assets/js/140.cbfdbe32.js"><link rel="prefetch" href="/note-pages/assets/js/142.723bd973.js"><link rel="prefetch" href="/note-pages/assets/js/143.b31785f9.js"><link rel="prefetch" href="/note-pages/assets/js/144.69d3d121.js"><link rel="prefetch" href="/note-pages/assets/js/145.c4ee6aa0.js"><link rel="prefetch" href="/note-pages/assets/js/146.7f836a1c.js"><link rel="prefetch" href="/note-pages/assets/js/147.d4a57976.js"><link rel="prefetch" href="/note-pages/assets/js/148.b15e75eb.js"><link rel="prefetch" href="/note-pages/assets/js/149.94085ddc.js"><link rel="prefetch" href="/note-pages/assets/js/15.4ed118f1.js"><link rel="prefetch" href="/note-pages/assets/js/150.6751d41b.js"><link rel="prefetch" href="/note-pages/assets/js/151.bd60e322.js"><link rel="prefetch" href="/note-pages/assets/js/152.15caf78f.js"><link rel="prefetch" href="/note-pages/assets/js/153.131128fc.js"><link rel="prefetch" href="/note-pages/assets/js/154.b8ee2e7d.js"><link rel="prefetch" href="/note-pages/assets/js/155.8fa1e2e0.js"><link rel="prefetch" href="/note-pages/assets/js/156.25e2a796.js"><link rel="prefetch" href="/note-pages/assets/js/157.7137c9c3.js"><link rel="prefetch" href="/note-pages/assets/js/158.fdc18c40.js"><link rel="prefetch" href="/note-pages/assets/js/159.0dadb745.js"><link rel="prefetch" href="/note-pages/assets/js/16.818fc8bf.js"><link rel="prefetch" href="/note-pages/assets/js/160.05f7541c.js"><link rel="prefetch" href="/note-pages/assets/js/161.2a8c62a2.js"><link rel="prefetch" href="/note-pages/assets/js/162.5b9983b7.js"><link rel="prefetch" href="/note-pages/assets/js/163.b51a5538.js"><link rel="prefetch" href="/note-pages/assets/js/164.06c9f20a.js"><link rel="prefetch" href="/note-pages/assets/js/165.c25063f4.js"><link rel="prefetch" href="/note-pages/assets/js/166.6c570da5.js"><link rel="prefetch" href="/note-pages/assets/js/167.12fb6fb6.js"><link rel="prefetch" href="/note-pages/assets/js/168.d7dd27bc.js"><link rel="prefetch" href="/note-pages/assets/js/169.27f575fe.js"><link rel="prefetch" href="/note-pages/assets/js/17.9daf0c47.js"><link rel="prefetch" href="/note-pages/assets/js/170.ba4295ef.js"><link rel="prefetch" href="/note-pages/assets/js/171.3fb54078.js"><link rel="prefetch" href="/note-pages/assets/js/18.086ed162.js"><link rel="prefetch" href="/note-pages/assets/js/19.adca670c.js"><link rel="prefetch" href="/note-pages/assets/js/20.2e9ff004.js"><link rel="prefetch" href="/note-pages/assets/js/21.07830947.js"><link rel="prefetch" href="/note-pages/assets/js/22.609929cb.js"><link rel="prefetch" href="/note-pages/assets/js/23.d83b832f.js"><link rel="prefetch" href="/note-pages/assets/js/24.592e8014.js"><link rel="prefetch" href="/note-pages/assets/js/25.9d28bb6f.js"><link rel="prefetch" href="/note-pages/assets/js/26.fd4195d5.js"><link rel="prefetch" href="/note-pages/assets/js/27.ca60e875.js"><link rel="prefetch" href="/note-pages/assets/js/28.c2cd75e6.js"><link rel="prefetch" href="/note-pages/assets/js/29.4213d132.js"><link rel="prefetch" href="/note-pages/assets/js/30.c6ee0ead.js"><link rel="prefetch" href="/note-pages/assets/js/31.eea6a542.js"><link rel="prefetch" href="/note-pages/assets/js/32.1ffdceaf.js"><link rel="prefetch" href="/note-pages/assets/js/33.0425748b.js"><link rel="prefetch" href="/note-pages/assets/js/34.5dd0d81d.js"><link rel="prefetch" href="/note-pages/assets/js/35.773df14e.js"><link rel="prefetch" href="/note-pages/assets/js/36.5db32ea2.js"><link rel="prefetch" href="/note-pages/assets/js/37.1106162c.js"><link rel="prefetch" href="/note-pages/assets/js/38.793ba7d0.js"><link rel="prefetch" href="/note-pages/assets/js/39.488fb9a5.js"><link rel="prefetch" href="/note-pages/assets/js/4.550e6883.js"><link rel="prefetch" href="/note-pages/assets/js/40.9c05b0ae.js"><link rel="prefetch" href="/note-pages/assets/js/41.ae198526.js"><link rel="prefetch" href="/note-pages/assets/js/42.d815456e.js"><link rel="prefetch" href="/note-pages/assets/js/43.1808aff8.js"><link rel="prefetch" href="/note-pages/assets/js/44.c26d9bde.js"><link rel="prefetch" href="/note-pages/assets/js/45.fae5f755.js"><link rel="prefetch" href="/note-pages/assets/js/46.703057c9.js"><link rel="prefetch" href="/note-pages/assets/js/47.ed3a23ce.js"><link rel="prefetch" href="/note-pages/assets/js/48.c5a46ee8.js"><link rel="prefetch" href="/note-pages/assets/js/49.b04c1681.js"><link rel="prefetch" href="/note-pages/assets/js/5.869d288f.js"><link rel="prefetch" href="/note-pages/assets/js/50.249fc2a7.js"><link rel="prefetch" href="/note-pages/assets/js/51.cab74632.js"><link rel="prefetch" href="/note-pages/assets/js/52.e2f231b3.js"><link rel="prefetch" href="/note-pages/assets/js/53.6241e308.js"><link rel="prefetch" href="/note-pages/assets/js/54.7d29c5c0.js"><link rel="prefetch" href="/note-pages/assets/js/55.a9050f95.js"><link rel="prefetch" href="/note-pages/assets/js/56.75828a09.js"><link rel="prefetch" href="/note-pages/assets/js/57.b3f75d67.js"><link rel="prefetch" href="/note-pages/assets/js/58.0cf3bd1c.js"><link rel="prefetch" href="/note-pages/assets/js/59.19f18f1f.js"><link rel="prefetch" href="/note-pages/assets/js/6.d879438f.js"><link rel="prefetch" href="/note-pages/assets/js/60.61940d92.js"><link rel="prefetch" href="/note-pages/assets/js/61.bc890bb0.js"><link rel="prefetch" href="/note-pages/assets/js/62.f487437c.js"><link rel="prefetch" href="/note-pages/assets/js/63.4a91369b.js"><link rel="prefetch" href="/note-pages/assets/js/64.1b0770e4.js"><link rel="prefetch" href="/note-pages/assets/js/65.b56e2b22.js"><link rel="prefetch" href="/note-pages/assets/js/66.dd49594c.js"><link rel="prefetch" href="/note-pages/assets/js/67.22efede4.js"><link rel="prefetch" href="/note-pages/assets/js/68.0d22a8a4.js"><link rel="prefetch" href="/note-pages/assets/js/69.aec9bfeb.js"><link rel="prefetch" href="/note-pages/assets/js/7.e3626849.js"><link rel="prefetch" href="/note-pages/assets/js/70.0c53c20d.js"><link rel="prefetch" href="/note-pages/assets/js/71.6d6db7d6.js"><link rel="prefetch" href="/note-pages/assets/js/72.fdcfb985.js"><link rel="prefetch" href="/note-pages/assets/js/73.a390b48d.js"><link rel="prefetch" href="/note-pages/assets/js/74.e817987f.js"><link rel="prefetch" href="/note-pages/assets/js/75.f144cf4f.js"><link rel="prefetch" href="/note-pages/assets/js/76.7be2f5f1.js"><link rel="prefetch" href="/note-pages/assets/js/77.6568d596.js"><link rel="prefetch" href="/note-pages/assets/js/78.4ff63ca8.js"><link rel="prefetch" href="/note-pages/assets/js/79.daaf791e.js"><link rel="prefetch" href="/note-pages/assets/js/8.f9f716a1.js"><link rel="prefetch" href="/note-pages/assets/js/80.a0605696.js"><link rel="prefetch" href="/note-pages/assets/js/81.ecb125f5.js"><link rel="prefetch" href="/note-pages/assets/js/82.b64b1c42.js"><link rel="prefetch" href="/note-pages/assets/js/83.d13b7f19.js"><link rel="prefetch" href="/note-pages/assets/js/84.c584da75.js"><link rel="prefetch" href="/note-pages/assets/js/85.7992353f.js"><link rel="prefetch" href="/note-pages/assets/js/86.17ad6399.js"><link rel="prefetch" href="/note-pages/assets/js/87.289f9f2f.js"><link rel="prefetch" href="/note-pages/assets/js/88.3496d6e2.js"><link rel="prefetch" href="/note-pages/assets/js/89.0d0c778d.js"><link rel="prefetch" href="/note-pages/assets/js/9.3209071f.js"><link rel="prefetch" href="/note-pages/assets/js/90.245b9fda.js"><link rel="prefetch" href="/note-pages/assets/js/91.806af5f2.js"><link rel="prefetch" href="/note-pages/assets/js/92.8a10f401.js"><link rel="prefetch" href="/note-pages/assets/js/93.ea90ae18.js"><link rel="prefetch" href="/note-pages/assets/js/94.98cc66ef.js"><link rel="prefetch" href="/note-pages/assets/js/95.836e96c5.js"><link rel="prefetch" href="/note-pages/assets/js/96.d4dd3eee.js"><link rel="prefetch" href="/note-pages/assets/js/97.e4275cb9.js"><link rel="prefetch" href="/note-pages/assets/js/98.0e320d92.js"><link rel="prefetch" href="/note-pages/assets/js/99.e6f77650.js">
    <link rel="stylesheet" href="/note-pages/assets/css/0.styles.167a34c7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-pages/" class="home-link router-link-active"><!----> <span class="site-name">后端技术栈笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-pages/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          算法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/algorithm/5e022a/" class="nav-link">
  算法
</a></li></ul></li><li class="dropdown-item"><h4>
          计算机网络
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/network/a918ca/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/note-pages/http/" class="nav-link">
  HTTP
</a></li><li class="dropdown-subitem"><a href="/note-pages/tcp-ip/" class="nav-link">
  TCP/IP
</a></li><li class="dropdown-subitem"><a href="/note-pages/socket/" class="nav-link">
  Socket
</a></li></ul></li><li class="dropdown-item"><h4>
          操作系统
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/operating-system/knuk3x/" class="nav-link">
  操作系统
</a></li><li class="dropdown-subitem"><a href="/note-pages/linux/" class="nav-link">
  Linux
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/database-system/fyl5c1/" class="nav-link">
  数据库系统
</a></li><li class="dropdown-subitem"><a href="/note-pages/computer-systems/" class="nav-link">
  计算机系统
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程语言" class="mobile-dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/java/5ddf72/" class="nav-link">
  Java基础
</a></li><li class="dropdown-subitem"><a href="/note-pages/java-collection/" class="nav-link">
  Java集合
</a></li><li class="dropdown-subitem"><a href="/note-pages/java-concurrency/" class="nav-link">
  Java并发
</a></li><li class="dropdown-subitem"><a href="/note-pages/jvm/" class="nav-link">
  JVM
</a></li></ul></li><li class="dropdown-item"><h4>
          C/C++
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/cpp/" class="nav-link">
  C++基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Go
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/go/" class="nav-link">
  Go基础
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/assembly/" class="nav-link">
  Assembly
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发框架" class="dropdown-title"><span class="title">开发框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发框架" class="mobile-dropdown-title"><span class="title">开发框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/spring/" class="nav-link">
  Spring
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/mysql/1dh29a/" class="nav-link">
  MySQL
</a></li><li class="dropdown-subitem"><a href="/note-pages/redis/" class="nav-link">
  Redis
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构设计" class="dropdown-title"><span class="title">架构设计</span> <span class="arrow down"></span></button> <button type="button" aria-label="架构设计" class="mobile-dropdown-title"><span class="title">架构设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          分布式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/distributed-system/01-理论基础/" class="nav-link">
  分布式系统
</a></li></ul></li><li class="dropdown-item"><h4>
          微服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/micro-service-in-action/" class="nav-link">
  微服务实战
</a></li></ul></li><li class="dropdown-item"><h4>
          消息队列
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/kafka/" class="nav-link">
  Kafka
</a></li><li class="dropdown-subitem"><a href="/note-pages/rocket-mq/" class="nav-link">
  RocketMQ
</a></li></ul></li><li class="dropdown-item"><h4>
          注册中心
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/zookeeper/" class="nav-link">
  ZooKeeper
</a></li><li class="dropdown-subitem"><a href="/note-pages/eureka/" class="nav-link">
  Eureka
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发工具" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-pages/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note-pages/docker/34kd5q/" class="nav-link">
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="理论方法" class="dropdown-title"><span class="title">理论方法</span> <span class="arrow down"></span></button> <button type="button" aria-label="理论方法" class="mobile-dropdown-title"><span class="title">理论方法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-pages/design-pattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/note-pages/software-engineering/n4r1lx/" class="nav-link">
  软件工程
</a></li></ul></div></div><div class="nav-item"><a href="/note-pages/interview/f05h67/" class="nav-link">
  面试通关
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note-pages/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          算法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/algorithm/5e022a/" class="nav-link">
  算法
</a></li></ul></li><li class="dropdown-item"><h4>
          计算机网络
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/network/a918ca/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/note-pages/http/" class="nav-link">
  HTTP
</a></li><li class="dropdown-subitem"><a href="/note-pages/tcp-ip/" class="nav-link">
  TCP/IP
</a></li><li class="dropdown-subitem"><a href="/note-pages/socket/" class="nav-link">
  Socket
</a></li></ul></li><li class="dropdown-item"><h4>
          操作系统
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/operating-system/knuk3x/" class="nav-link">
  操作系统
</a></li><li class="dropdown-subitem"><a href="/note-pages/linux/" class="nav-link">
  Linux
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/database-system/fyl5c1/" class="nav-link">
  数据库系统
</a></li><li class="dropdown-subitem"><a href="/note-pages/computer-systems/" class="nav-link">
  计算机系统
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程语言" class="mobile-dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/java/5ddf72/" class="nav-link">
  Java基础
</a></li><li class="dropdown-subitem"><a href="/note-pages/java-collection/" class="nav-link">
  Java集合
</a></li><li class="dropdown-subitem"><a href="/note-pages/java-concurrency/" class="nav-link">
  Java并发
</a></li><li class="dropdown-subitem"><a href="/note-pages/jvm/" class="nav-link">
  JVM
</a></li></ul></li><li class="dropdown-item"><h4>
          C/C++
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/cpp/" class="nav-link">
  C++基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Go
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/go/" class="nav-link">
  Go基础
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/assembly/" class="nav-link">
  Assembly
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发框架" class="dropdown-title"><span class="title">开发框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发框架" class="mobile-dropdown-title"><span class="title">开发框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/spring/" class="nav-link">
  Spring
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/mysql/1dh29a/" class="nav-link">
  MySQL
</a></li><li class="dropdown-subitem"><a href="/note-pages/redis/" class="nav-link">
  Redis
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构设计" class="dropdown-title"><span class="title">架构设计</span> <span class="arrow down"></span></button> <button type="button" aria-label="架构设计" class="mobile-dropdown-title"><span class="title">架构设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          分布式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/distributed-system/01-理论基础/" class="nav-link">
  分布式系统
</a></li></ul></li><li class="dropdown-item"><h4>
          微服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/micro-service-in-action/" class="nav-link">
  微服务实战
</a></li></ul></li><li class="dropdown-item"><h4>
          消息队列
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/kafka/" class="nav-link">
  Kafka
</a></li><li class="dropdown-subitem"><a href="/note-pages/rocket-mq/" class="nav-link">
  RocketMQ
</a></li></ul></li><li class="dropdown-item"><h4>
          注册中心
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/zookeeper/" class="nav-link">
  ZooKeeper
</a></li><li class="dropdown-subitem"><a href="/note-pages/eureka/" class="nav-link">
  Eureka
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发工具" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-pages/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note-pages/docker/34kd5q/" class="nav-link">
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="理论方法" class="dropdown-title"><span class="title">理论方法</span> <span class="arrow down"></span></button> <button type="button" aria-label="理论方法" class="mobile-dropdown-title"><span class="title">理论方法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-pages/design-pattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/note-pages/software-engineering/n4r1lx/" class="nav-link">
  软件工程
</a></li></ul></div></div><div class="nav-item"><a href="/note-pages/interview/f05h67/" class="nav-link">
  面试通关
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/note-pages/java/5ddf72/" class="sidebar-link">第1章 Java程序设计概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf72/#_1-1-java-程序设计平台" class="sidebar-link">1.1 Java 程序设计平台</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf72/#_1-2-java-白皮书-的关键术语" class="sidebar-link">1.2 Java ”白皮书” 的关键术语</a></li></ul></li><li><a href="/note-pages/java/5ddf77/" class="sidebar-link">第2章 Java程序设计基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf77/#_2-1-简单示例" class="sidebar-link">2.1 简单示例</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf77/#_2-2-注释" class="sidebar-link">2.2 注释</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf77/#_2-3-数据类型" class="sidebar-link">2.3 数据类型</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf77/#_2-4-变量" class="sidebar-link">2.4 变量</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf77/#_2-5-运算符" class="sidebar-link">2.5 运算符</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf77/#_2-6-字符串" class="sidebar-link">2.6 字符串</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf77/#_2-7-输入输出" class="sidebar-link">2.7 输入输出</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf77/#_2-8-控制流程" class="sidebar-link">2.8 控制流程</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf77/#_2-9-大数值" class="sidebar-link">2.9 大数值</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf77/#_2-10-数组" class="sidebar-link">2.10 数组</a></li></ul></li><li><a href="/note-pages/java/5ddf78/" class="sidebar-link">第3章 对象与类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf78/#_3-1-面向对象程序设计概述" class="sidebar-link">3.1 面向对象程序设计概述</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf78/#_3-2-使用预定义类" class="sidebar-link">3.2 使用预定义类</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf78/#_3-3-用户自定义类" class="sidebar-link">3.3 用户自定义类</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf78/#_3-4-静态域与静态方法" class="sidebar-link">3.4 静态域与静态方法</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf78/#_3-5-按值调用" class="sidebar-link">3.5 按值调用</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf78/#_3-6-对象构造" class="sidebar-link">3.6 对象构造</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf78/#_3-7-包" class="sidebar-link">3.7 包</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf78/#_3-8-类路径" class="sidebar-link">3.8 类路径</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf78/#_3-9-文档注释" class="sidebar-link">3.9 文档注释</a></li></ul></li><li><a href="/note-pages/java/5ddf79/" class="sidebar-link">第4章 继承与多态</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf79/#_4-1-类、超类和子类" class="sidebar-link">4.1 类、超类和子类</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf79/#_4-2-object-所有类的超类" class="sidebar-link">4.2 Object：所有类的超类</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf79/#_4-3-接口" class="sidebar-link">4.3 接口</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf79/#_4-4-lambda-表达式" class="sidebar-link">4.4 lambda  表达式</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf79/#_4-5-内部类" class="sidebar-link">4.5 内部类</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf79/#_4-6-泛型数组列表" class="sidebar-link">4.6 泛型数组列表</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf79/#_4-7-对象包装器与自动装箱" class="sidebar-link">4.7 对象包装器与自动装箱</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf79/#_4-8-参数数量可变的方法" class="sidebar-link">4.8 参数数量可变的方法</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf79/#_4-9-枚举类" class="sidebar-link">4.9 枚举类</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf79/#_4-10-继承的设计技巧" class="sidebar-link">4.10 继承的设计技巧</a></li></ul></li><li><a href="/note-pages/java/5ddf7a/" aria-current="page" class="active sidebar-link">第5章 反射机制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf7a/#_5-1-class-类" class="sidebar-link">5.1 Class 类</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf7a/#_5-2-利用反射分析类的能力" class="sidebar-link">5.2 利用反射分析类的能力</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf7a/#_5-3-在运行时使用反射分析对象" class="sidebar-link">5.3 在运行时使用反射分析对象</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf7a/#_5-4-使用反射编写泛型数组代码" class="sidebar-link">5.4 使用反射编写泛型数组代码</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf7a/#_5-5-调用任意方法" class="sidebar-link">5.5 调用任意方法</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf7a/#_5-6-代理" class="sidebar-link">5.6 代理</a></li></ul></li><li><a href="/note-pages/java/5ddf7b/" class="sidebar-link">第6章 异常处理和日志</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf7b/#_6-1-异常" class="sidebar-link">6.1 异常</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf7b/#_6-2-捕获异常" class="sidebar-link">6.2 捕获异常</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf7b/#_6-3-断言" class="sidebar-link">6.3 断言</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddf7b/#_6-4-日志" class="sidebar-link">6.4 日志</a></li></ul></li><li><a href="/note-pages/java/5ddfa4/" class="sidebar-link">第7章 泛型程序设计</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa4/#_7-1-定义简单泛型类" class="sidebar-link">7.1 定义简单泛型类</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa4/#_7-2-定义泛型方法" class="sidebar-link">7.2 定义泛型方法</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa4/#_7-3-类型变量的限定" class="sidebar-link">7.3 类型变量的限定</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa4/#_7-4-泛型代码和虚拟机" class="sidebar-link">7.4 泛型代码和虚拟机</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa4/#_7-5-约束与局限性" class="sidebar-link">7.5 约束与局限性</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa4/#_7-6-泛型类型的继承规则" class="sidebar-link">7.6 泛型类型的继承规则</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa4/#_7-7-通配符类型" class="sidebar-link">7.7 通配符类型</a></li></ul></li><li><a href="/note-pages/java/5ddfa5/" class="sidebar-link">第8章 集合和算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa5/#_8-1-集合框架" class="sidebar-link">8.1 集合框架</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa5/#_8-2-集合" class="sidebar-link">8.2 集合</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa5/#_8-3-映射" class="sidebar-link">8.3 映射</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa5/#_8-4-视图与包装器" class="sidebar-link">8.4 视图与包装器</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa5/#_8-5-算法" class="sidebar-link">8.5 算法</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa5/#_8-6-遗留的集合" class="sidebar-link">8.6 遗留的集合</a></li></ul></li><li><a href="/note-pages/java/8vnc6h/" class="sidebar-link">第9章 Java 8 的流库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/java/8vnc6h/#_9-1-从迭代到流的操作" class="sidebar-link">9.1 从迭代到流的操作</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/8vnc6h/#_9-2-流的操作" class="sidebar-link">9.2 流的操作</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/8vnc6h/#_9-3-约简操作" class="sidebar-link">9.3 约简操作</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/8vnc6h/#_9-4-optional-类型" class="sidebar-link">9.4 Optional 类型</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/8vnc6h/#_9-5-收集结果" class="sidebar-link">9.5 收集结果</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/8vnc6h/#_9-6-群组和分区" class="sidebar-link">9.6 群组和分区</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/8vnc6h/#_9-7-基本类型流" class="sidebar-link">9.7 基本类型流</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/8vnc6h/#_9-8-并行流" class="sidebar-link">9.8 并行流</a></li></ul></li><li><a href="/note-pages/java/5ddfa7/" class="sidebar-link">第10章 Java类库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa7/#_10-1-基础类库" class="sidebar-link">10.1 基础类库</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa7/#_10-2-反射类库" class="sidebar-link">10.2 反射类库</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa7/#_10-3-工具类库" class="sidebar-link">10.3 工具类库</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa7/#_10-4-集合类库" class="sidebar-link">10.4 集合类库</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa7/#_10-5-数学类库" class="sidebar-link">10.5 数学类库</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa7/#_10-6-日志类库" class="sidebar-link">10.6 日志类库</a></li><li class="sidebar-sub-header"><a href="/note-pages/java/5ddfa7/#_10-7-文本类库" class="sidebar-link">10.7 文本类库</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第5章-反射机制"><a href="#第5章-反射机制" class="header-anchor">#</a> 第5章 反射机制</h1> <p>反射库（reflection library）提供了一个非常丰富且精心设计的工具集，以便编写能够动态操纵 Java 代码的程序。这项功能被大量地应用于 JavaBeans 中，它是 Java 组件的体系结构。</p> <p>能够分析类能力的程序称为反射（reflective）。反射机制的功能极其强大，反射机制可以用来：</p> <ul><li>在运行时分析类的能力。</li> <li>在运行时查看对象，例如，编写一个 toString 方法供所有类使用。</li> <li>实现通用的数组操作代码。</li> <li>利用 Method 对象，这个对象很像 C++ 中的函数指针。</li></ul> <h2 id="_5-1-class-类"><a href="#_5-1-class-类" class="header-anchor">#</a> 5.1 Class 类</h2> <p>在程序运行期间，Java 运行时系统始终为所有的对象维护一个被称为运行时的类型标识。这个信息跟踪着每个对象所属的类。虚拟机利用运行时类型信息、选择相应的方法执行。</p> <p>保存这些信息的类被称为 Class，这个名字很容易让人混淆。</p> <h3 id="获取-class-类对象"><a href="#获取-class-类对象" class="header-anchor">#</a> 获取 Class 类对象</h3> <div id="getclass-方法" class="anchor">getClass 方法</div><p>Object 类中的 getClass() 方法将会返回一个 Class 类型的实例。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Employee</span> e<span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token class-name">Class</span> cl <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>一个 Class 对象将表示一个特定类的属性。</p> <p>getName 方法将返回类的名字。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果 e 是一个雇员， 则会打印输出：Employee Harry Hacker</p> <p>如果 e 是经理，则会打印输出：Manager Harry Hacker</p> <div id="forname-方法" class="anchor">forName 方法</div><p>如果类在一个包里，包的名字也作为类名的一部分：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Random</span> generator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span> cl <span class="token operator">=</span> generator<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> name <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name is set to &quot;java.util.Random&quot;</span>
</code></pre></div><p>此外，可以调用静态方法 forName 获得类名对应的 Class 对象。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> className <span class="token operator">=</span> <span class="token string">&quot;java.util.Random&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span> cl <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当然，这个方法只有在 className 是类名或接口名时才能够执行。否则，forName 方法将抛出一个 checked exception（受查异常）。</p> <div id="t-class" class="anchor">T.class</div><p>获得 Class 类对象的第三种方法非常简单。 如果 T 是任意的 Java 类型（或 void 关键字），T.class 将代表匹配的类对象 。 例如：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Class</span> cl1 <span class="token operator">=</span> <span class="token class-name">Random</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span> <span class="token comment">// if you import java.util.*;</span>
<span class="token class-name">Class</span> c12 <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span> c13 <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
</code></pre></div><p>注意， 一个 Class 对象实际上表示的是一个类型，而这个类型未必一定是一种类。 例如，int 不是类 ，但 int.class 是一个 Class 类型的对象 。</p> <blockquote><p><strong>注释</strong>：Class 类实际上是一个泛型类。例如，Employee.class 的类型是 Class&lt;Employee&gt;。</p></blockquote> <blockquote><p><strong>警告</strong>：鉴于历史原因， getName 方法在应用于数组类型的时候会返回一个很奇怪的名字。</p></blockquote> <h3 id="动态创建实例"><a href="#动态创建实例" class="header-anchor">#</a> 动态创建实例</h3> <p>newlnstance 方法可以用来动态地创建一个类的实例。 例如，</p> <div class="language-java extra-class"><pre class="language-java"><code>e<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>创建了一个与 e 具有相同类类型的实例。</p> <p>newInstance 方法调用默认的构造器（没有参数的构造器）初始化新创建的对象。如果这个类没有默认的构造器，就会抛出一个异常。</p> <h2 id="_5-2-利用反射分析类的能力"><a href="#_5-2-利用反射分析类的能力" class="header-anchor">#</a> 5.2 利用反射分析类的能力</h2> <p>下面简要地介绍一下反射机制最重要的内容一一检查类的结构。</p> <p>java.lang.reflect 包中有三个类 <strong>Field、Method 和 Constructor</strong> 分别用于描述类的<strong>域、方法和构造器</strong>。</p> <p>这三个类都有一个叫做 getName 的方法，用来返回项目的名称。Field 类有一个 getType 方法，用来返回描述域所属类型的 Class 对象。Method 和 Constructor 类有能够报告参数类型的方法，Method 类还有一个可以报告返回类型的方法。</p> <p>这三个类还有一个叫做 getModifiers 的方法，它将返回一个整型数值，用不同的位开关描述 public 和 static 这样的修饰符使用状况。另外，还可以利用 java.lang.reflect 包中的 Modifier 类的静态方法分析 getModifiers 返回的整型数值。例如，可以使用 Modifier 类中的 isPublic、isPrivate 或 isFinal 判断方法或构造器是否是 public、private 或 final。我们需要做的全部工作就是调用 Modifier 类的相应方法，并对返回的整型数值进行分析，另外，还可以利用 Modifier.toString 方法将修饰符打印出来。</p> <p>Class 类的 getFields、getMethods 和 getConstructors 方法将分别返回类提供的 public 域、方法和构造器数组，其中包括超类的公有成员。Class 类的 getDeclareFields、getDeclareMethods 和 getDeclaredConstructors 方法将分别返回类中声明的全部域、方法和构造器，包括私有和受保护成员，但不包括超类的成员。</p> <h2 id="_5-3-在运行时使用反射分析对象"><a href="#_5-3-在运行时使用反射分析对象" class="header-anchor">#</a> 5.3 在运行时使用反射分析对象</h2> <p>我们已经知道如何查看任意对象的数据域名称和类型：</p> <ul><li>获得对应的 Class 对象。</li> <li>通过 Class 对象调用 getDeclaredFields。</li></ul> <p>在编写程序时，如果知道想要查看的域名和类型，查看指定的域是一件很容易的事情。利用反射机制可以查看在编译时还不清楚的对象域。</p> <h3 id="查看对象域"><a href="#查看对象域" class="header-anchor">#</a> 查看对象域</h3> <p>查看对象域的关键方法是 Field 类中的 get 方法。如果 f 是一个 Field 类型的对象（例如，通过 getDeclaredFields 得到的对象），obj 是某个包含 f 域的类的对象， f.get(obj) 将返回一个对象，其值为 obj 域的当前值。 这样说起来显得有点抽象，这里看一看下面这个示例的运行。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Employee</span> harry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">&quot;Harry Hacker&quot;</span><span class="token punctuation">,</span> <span class="token number">35000</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1989</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span> cl <span class="token operator">=</span> harry<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// the class object representing Employee </span>
<span class="token class-name">Field</span> f <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// the name field of the Employee class </span>
<span class="token class-name">Object</span> v <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>harry<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token comment">// the value of the name field of the harry object, </span>
	<span class="token comment">// i.e., the String object &quot;Harry Hacker&quot;</span>
</code></pre></div><p>实际上，这段代码存在问题。由于 name 是一个私有域，get 方法将会抛出一个 IllegalAccessException。 除非拥有访问权限，否则 Java 安全机制只允许查看任意对象有哪些域，而不允许读取它们的值 。</p> <h3 id="setaccessible-方法"><a href="#setaccessible-方法" class="header-anchor">#</a> setAccessible 方法</h3> <p><strong>反射机制的默认行为受限于 Java 的访问控制。</strong> 然而，如果一个 Java 程序没有受到安全管理器的控制，就可以覆盖访问控制。为了达到这个目的，需要调用 Field、Method 或 Constructor 对象的 <strong>setAccessible 方法</strong>。例如，</p> <div class="language-java extra-class"><pre class="language-java"><code>f<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// now OK to call f.get(harry);</span>
</code></pre></div><p>setAccessible 方法是 AccessibleObject 类中的一个方法，AccessibleObject 是 Field、Method 和 Constructor 类的公共超类。 这个特性是为调试、持久存储和相似机制提供的。</p> <p>当然，可以获得就可以设置。调用 f.set(obj, value) 可以将 obj 对象的 f 域设置成新值。</p> <h2 id="_5-4-使用反射编写泛型数组代码"><a href="#_5-4-使用反射编写泛型数组代码" class="header-anchor">#</a> 5.4 使用反射编写泛型数组代码</h2> <p>java.lang.reflect 中的 Array 类允许动态地创建数组。例如，将这个特性应用到 Array 类中的 copyOf 方法实现中，这个方法可以用于扩展已经填满的数组。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Employee</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token comment">// array is full</span>
a <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> a<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如何编写这样一个通用的方法呢？正好能够将 Employee[] 数组转换为 Object[] 数组。进行第一次尝试。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">badCopyOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> newLength<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// not useful</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> newArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>newLength<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> newArray<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>length<span class="token punctuation">,</span> newLength<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newArray<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然而，在实际使用结果数组时会遇到一个问题。这段代码返回的数组类型是对象数组（Object[]）类型，不能转换成雇员数组（Employee[]）。如果这样做，则在运行时将产生 ClassCastException 异常。</p> <p>前面已经看到，Java 数组会记住每个元素的类型，即创建数组时 new 表达式中使用的元素类型。将一个 Employee[] 临时地转换成 Object[] 数组，然后再把它转换回来是可以的，但一个从开始就是 Object[] 的数组却永远不能转换成  Employee[] 数组。</p> <h3 id="动态创建数组"><a href="#动态创建数组" class="header-anchor">#</a> 动态创建数组</h3> <p>为此，需要使用 java.lang.reflect 中 Array 类的一些方法。其中最关键的是 Array 类中的静态方法 newInstance，它能够构造新数组。在调用它时必须提供两个参数，一个是数组的元素类型，一个是数组的长度。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Object</span> newArray <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>componentType<span class="token punctuation">,</span> newLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可以通过 Array 类的静态 getLength 方法的返回值得到任意数组的长度。 而要获得新数组元素类型，就需要进行以下工作：</p> <ul><li>首先获得 a 数组的类对象。</li> <li>确认它是一个数组。</li> <li>使用 Class 类（只能定义表示数组的类对象）的 getComponentType 方法确定数组对应的类型。</li></ul> <h3 id="确定数组类型"><a href="#确定数组类型" class="header-anchor">#</a> 确定数组类型</h3> <p>为什么 getLength 是 Array 的方法，而 getComponentType 是 Class 的方法呢？我们也不清楚。反射方法的分类有时确实显得有点古怪。下面是这段代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">goodCopyOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> newLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Class</span> cl <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cl<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">Class</span> componentType <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">getComponentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span> newArray <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>componentType<span class="token punctuation">,</span> newLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> newArray<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> newLength<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newArray<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个 CopyOf 方法可以用来扩展任意类型的数组，而不仅是对象数组（Object[]）。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">goodCopyOf</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>为了能够实现上述操作，应该将 goodCopyOf 的参数声明为 Object 类型，而不要声明为对象型数组（Object[]）。整型数组类型 int[] 可以被转换成 Object，但不能转换成对象数组（Object[]）。</p> <h2 id="_5-5-调用任意方法"><a href="#_5-5-调用任意方法" class="header-anchor">#</a> 5.5 调用任意方法</h2> <p>在 C 和 C++ 中，可以从函数指针执行任意函数。从表面上看，Java 没有提供方法指针，即将一个方法的存储地址传给另外一个方法，以便第二个方法能够随后调用它。</p> <p>事实上，Java 的设计者曾说过：方法指针是很危险的，并且常常会带来隐患。他们认为 Java 提供的接口（interface）是一种更好的解决方案。然而，反射机制允许你调用任意方法。</p> <h3 id="调用-method-对象中的方法"><a href="#调用-method-对象中的方法" class="header-anchor">#</a> 调用 Method 对象中的方法</h3> <p>为了能够看到方法指针的工作过程，先回忆一下利用 Field 类的 get 方法查看对象域的过程。与之类似，在 Method 类中有一个 invoke 方法，它允许调用包装在当前 Method 对象中的方法。</p> <p>invoke 方法的签名是：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span>
</code></pre></div><p>第一个参数是隐式参数，其余的对象提供了显式参数。对于静态方法，第一个参数可以被忽略，即可以将它设置为 null。</p> <p>例如，假设用 m1 代表 Employee 类的 getName 方法，下面这条语句显示了如何调用这个方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> n <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> m1<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>harry<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果返回类型是基本类型， invoke 方法会返回其包装器类型。</p> <h3 id="获取-method-对象"><a href="#获取-method-对象" class="header-anchor">#</a> 获取 Method 对象</h3> <p>如何得到 Method 对象呢？可以通过调用 Class 类中的 getMethod 方法得到想要的方法。它与 getField 方法类似。getField 方法根据表示域名的字符串，返回一个 Field 对象。然而，有可能存在若干个相同名字的方法，因此要格外小心，以确保能够准确地得到想要的那个方法。有鉴于此，还必须提供想要的方法的参数类型。getMethod 的签名是：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Method</span> <span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> parameterTypes<span class="token punctuation">)</span>
</code></pre></div><p>例如，下面说明了如何获得 Employee 类的 getName 方法和 raiseSalary 方法的方法指针。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Methodm1</span> <span class="token operator">=</span> <span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;getName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Methodm2</span> <span class="token operator">=</span> <span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;raiseSalary&quot;</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这种程序设计风格并不太简便，出错的可能性也比较大。如果在调用方法的时候提供了一个错误的参数，那么 invoke 方法将会抛出一个异常。</p> <p>另外，invoke 的参数和返回值必须是 Object 类型的。这就意味着必须进行多次的类型转换。这样做将会使编译器错过检查代码的机会。因此，等到测试阶段才会发现这些错误，找到并改正它们将会更加困难。</p> <p>有鉴于此，建议仅在必要时才使用 Method 对象，而最好使用接口以及 Java SE 8 中的 lambda 表达式。</p> <h2 id="_5-6-代理"><a href="#_5-6-代理" class="header-anchor">#</a> 5.6 代理</h2> <p>代理模式通过创建一个代理对象来控制对其他对象的访问。代理对象充当原始对象的中间人，客户端与代理对象进行交互，并由代理对象将请求传递给原始对象，以实现间接访问和控制。</p> <p>代理模式是常用的结构型设计模式之一，当直接访问某些对象存在问题时可以通过一个代理对象来间接访问，为了保证客户端使用的透明性，所访问的真实对象与代理对象需要实现相同的接口。</p> <p>代理模式可以分为静态代理和动态代理两种类型，而动态代理又分为 <strong>JDK 动态代理</strong> 和 <strong>CGLIB 代理</strong>。</p> <h3 id="jdk-动态代理"><a href="#jdk-动态代理" class="header-anchor">#</a> JDK 动态代理</h3> <div class="subtitle"><p>InvocationHandler</p></div><p>每一个动态代理类都必须要实现 InvocationHandler 这个接口，并且每个代理类的实例都关联了一个 handler，当我们通过代理对象调用一个方法的时候，这个方法的调用就会被转发为由 InvocationHandler 这个接口的 invoke 方法来进行调用。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span>
</code></pre></div><p>这个方法一共接受三个参数：</p> <ul><li><strong>proxy</strong>：JDK 动态生成的最终代理对象</li> <li><strong>method</strong>：调用真实对象的某个方法的 Method 对象</li> <li><strong>args</strong>：调用真实对象某个方法时接受的参数</li></ul> <div class="subtitle"><p>Proxy</p></div><p>Proxy 通过反射机制动态创建代理类实例。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span> loader<span class="token punctuation">,</span> 
                                      <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces<span class="token punctuation">,</span> 
                                      <span class="token class-name">InvocationHandler</span> handler<span class="token punctuation">)</span> 	
    <span class="token keyword">throws</span> <span class="token class-name">IllegalArgumentException</span>
</code></pre></div><p>这个方法返回一个动态代理对象，其接收三个参数：</p> <ul><li><strong>loader</strong>：ClassLoader 对象，定义了由哪个 ClassLoader 来对生成的代理对象进行加载，即代理类的类加载器。</li> <li><strong>interfaces</strong>：Interface 对象的数组，表示的是将给需要代理的对象提供一组什么接口，如果提供了一组接口给它，那么这个代理对象就宣称实现了该接口（多态），这样就能调用这组接口中的方法了。</li> <li><strong>Handler</strong>：InvocationHandler 对象，表示的是当这个动态代理对象调用方法时，会关联到哪一个 InvocationHandler 对象上。</li></ul> <div class="subtitle"><p>JDK 动态代理实例</p></div><p>接口类 HelloInterface</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">HelloInterface</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>被代理类 HelloImpl，实现 HelloInterface 接口</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 被代理类
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloImpl</span> <span class="token keyword">implements</span> <span class="token class-name">HelloInterface</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>InvocationHandler 实现类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 生成动态代理类对象需要指定一个实现了 InvocationHandler 接口的调用处理器对象
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDKProxy</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Object</span> subject<span class="token punctuation">;</span> <span class="token comment">// 被代理的真实对象，真正执行业务逻辑的类</span>

    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">Object</span> subject<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subject <span class="token operator">=</span> subject<span class="token punctuation">;</span>
        <span class="token comment">// 创建代理对象，传入类加载器、接口、handler</span>
        <span class="token keyword">return</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                                      <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token class-name">HelloInterface</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                                      <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 当代理对象调用真实对象的方法时，跳转到代理对象关联的 handler 对象的 invoke 方法
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> objs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;当前调用的方法是 &quot;</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>subject<span class="token punctuation">,</span> objs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 需要指定被代理对象和传入参数</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; 方法的返回值是 &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>测试</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDKTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建被代理对象</span>
        <span class="token class-name">HelloImpl</span> hello <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HelloImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 实例化 InvocationHandler 实现类</span>
        <span class="token class-name">JDKProxy</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JDKProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 生成代理对象</span>
        <span class="token class-name">HelloInterface</span> proxyInstance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HelloInterface</span><span class="token punctuation">)</span> proxy<span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>hello<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token comment">// 调用方法</span>
        proxyInstance<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>结果</p> <div class="language- extra-class"><pre class="language-text"><code>当前调用的方法是 say
hello
say 方法的返回值是 null
</code></pre></div><h3 id="cglib-动态代理"><a href="#cglib-动态代理" class="header-anchor">#</a> CGLIB 动态代理</h3> <p>CGLIB 动态代理是通过继承被代理对象来实现的，和 JDK 动态代理需要实现指定接口一样，CGLIB 要求代理对象必须要实现 <code>MethodInterceptor</code> 接口，并重写其唯一的方法 <code>intercept</code>。</p> <p>CGLib 采用了非常底层的字节码技术，其原理是通过字节码技术为一个类创建子类，并在子类中采用方法拦截技术拦截所有父类方法的调用，顺势织入横切逻辑。</p> <blockquote><p><strong>注意</strong>：因为 CGLIB 是通过继承目标类来重写其方法来实现的，故而如果是 final 和 private 方法则无法被重写，即无法被代理。</p></blockquote> <div class="subtitle"><p>CGLib 核心类</p></div><p><strong>net.sf.cglib.proxy.Enhancer</strong>：主要增强类，通过字节码技术动态创建委托类的子类实例。</p> <p>Enhancer 可能是 CGLIB 中最常用的一个类，和 Java1.3 动态代理中引入的 Proxy 类类似。和 Proxy 不同的是，Enhancer 既能够代理普通的 class，也能够代理接口。Enhancer 创建一个被代理对象的子类并且拦截所有的方法调用（包括从 Object 中继承的 toString 和 hashCode 方法）。Enhancer 不能够拦截 final 方法，例如 Object.getClass() 方法，这是由于 Java final 方法语义决定的。基于同样的道理，Enhancer 也不能对 fianl 类进行代理操作。这也是 Hibernate 为什么不能持久化 final class 的原因。</p> <p><strong>net.sf.cglib.proxy.MethodInterceptor</strong>：方法拦截器接口，需要实现 intercept 方法。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> proxy<span class="token punctuation">)</span> 
    <span class="token keyword">throws</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Throwable</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>obj</strong>：动态生成的代理对象</li> <li><strong>method</strong>：实际调用的方法</li> <li><strong>args</strong>：调用方法入参</li> <li><strong>net.sf.cglib.proxy.MethodProxy</strong>：Java Method 类的代理类，实现委托类对象的方法的调用。</li></ul> <div class="subtitle"><p>CGLib 代理实例</p></div><p>被代理类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代理类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 代理类 
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CglibProxy</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">Class</span> clazz<span class="token punctuation">)</span><span class="token punctuation">{</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token comment">// 通过字节码技术动态创建子类实例</span>
        <span class="token keyword">return</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  

    <span class="token comment">// 实现 MethodInterceptor 接口方法  </span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> proxy<span class="token punctuation">)</span> 
        <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span> 
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Before invoking...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token comment">// 通过代理类调用父类中的方法  </span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> proxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;After invoking...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>测试</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CglibTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 实例化 MethodInterceptor 实现类</span>
        <span class="token class-name">CglibProxy</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CglibProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token comment">// 通过生成子类的方式创建代理类  </span>
        <span class="token class-name">Hello</span> proxyInstance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Hello</span><span class="token punctuation">)</span> proxy<span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">Hello</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 调用方法</span>
        proxyInstance<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>结果</p> <div class="language- extra-class"><pre class="language-text"><code>Before invoking...
hello
After invoking...
</code></pre></div><div id="fastclass-机制" class="anchor">FastClass 机制</div><p>JDK 动态代理的拦截对象是通过反射的机制来调用被拦截方法的，反射的效率比较低。<strong>CGLIB 采用了 FastClass 的机制来实现对被拦截方法的调用。</strong></p> <p>CGLIB 共生成 3 个类：代理类、代理类的 FastClass、目标类的 FastClass，FastClass 机制就是对一个类的方法建立索引，通过索引来直接调用相应的方法。</p> <p>FastClass 并不是跟代理类一块生成的，而是在第一次执行 MethodProxy invoke/invokeSuper 时生成的并放在了缓存中。</p> <p>FastClass 机制模拟如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Target</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Target</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TargetFastClass</span> fastClass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TargetFastClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> index <span class="token operator">=</span> fastClass<span class="token punctuation">.</span><span class="token function">getIndex</span><span class="token punctuation">(</span><span class="token string">&quot;targetMethod1()V&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fastClass<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> target<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 模拟代理类
 * 例如：UserService$$EnhancerByCGLIB$$1552dfb0
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Target</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">targetMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;...targetMethod1...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">targetMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;...targetMethod2...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 模拟代理类 FastClass
 * 例如：UserService$$EnhancerByCGLIB$$1552dfb0$$FastClassByCGLIB$$8d34995d
 */</span>
<span class="token keyword">class</span> <span class="token class-name">TargetFastClass</span><span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arg<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Target</span> t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Target</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
                t<span class="token punctuation">.</span><span class="token function">targetMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
                t<span class="token punctuation">.</span><span class="token function">targetMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getIndex</span><span class="token punctuation">(</span><span class="token class-name">String</span> signature<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> <span class="token keyword">var</span> <span class="token operator">=</span> signature<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token operator">-</span><span class="token number">1709726090</span><span class="token operator">:</span>
                <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token operator">-</span><span class="token number">1709696299</span><span class="token operator">:</span>
                <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note-pages/java/5ddf79/" class="prev">
        第4章 继承与多态
      </a></span> <span class="next"><a href="/note-pages/java/5ddf7b/">
        第6章 异常处理和日志
      </a>
      →
    </span></p></div> </main> <aside items="[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object]" class="right-sidebar"><div style="margin-left:20px; margin-bottom: 10px; text-align: center; font-size:16px;font-weight:bold;">此页内容</div> <div class="right-sidebar-wrap"><ul class="right-sidebar-links"><li id="tab-item0" class="right-sidebar-item active"><a href="#_5-1-class-类" class="right-sidebar-item-level2">
          5.1 Class 类
        </a></li><li id="tab-item1" class="right-sidebar-item"><a href="#获取-class-类对象" class="right-sidebar-item-level3">
          获取 Class 类对象
        </a></li><li id="tab-item2" class="right-sidebar-item"><a href="#动态创建实例" class="right-sidebar-item-level3">
          动态创建实例
        </a></li><li id="tab-item3" class="right-sidebar-item"><a href="#_5-2-利用反射分析类的能力" class="right-sidebar-item-level2">
          5.2 利用反射分析类的能力
        </a></li><li id="tab-item4" class="right-sidebar-item"><a href="#_5-3-在运行时使用反射分析对象" class="right-sidebar-item-level2">
          5.3 在运行时使用反射分析对象
        </a></li><li id="tab-item5" class="right-sidebar-item"><a href="#查看对象域" class="right-sidebar-item-level3">
          查看对象域
        </a></li><li id="tab-item6" class="right-sidebar-item"><a href="#setaccessible-方法" class="right-sidebar-item-level3">
          setAccessible 方法
        </a></li><li id="tab-item7" class="right-sidebar-item"><a href="#_5-4-使用反射编写泛型数组代码" class="right-sidebar-item-level2">
          5.4 使用反射编写泛型数组代码
        </a></li><li id="tab-item8" class="right-sidebar-item"><a href="#动态创建数组" class="right-sidebar-item-level3">
          动态创建数组
        </a></li><li id="tab-item9" class="right-sidebar-item"><a href="#确定数组类型" class="right-sidebar-item-level3">
          确定数组类型
        </a></li><li id="tab-item10" class="right-sidebar-item"><a href="#_5-5-调用任意方法" class="right-sidebar-item-level2">
          5.5 调用任意方法
        </a></li><li id="tab-item11" class="right-sidebar-item"><a href="#调用-method-对象中的方法" class="right-sidebar-item-level3">
          调用 Method 对象中的方法
        </a></li><li id="tab-item12" class="right-sidebar-item"><a href="#获取-method-对象" class="right-sidebar-item-level3">
          获取 Method 对象
        </a></li><li id="tab-item13" class="right-sidebar-item"><a href="#_5-6-代理" class="right-sidebar-item-level2">
          5.6 代理
        </a></li><li id="tab-item14" class="right-sidebar-item"><a href="#jdk-动态代理" class="right-sidebar-item-level3">
          JDK 动态代理
        </a></li><li id="tab-item15" class="right-sidebar-item"><a href="#cglib-动态代理" class="right-sidebar-item-level3">
          CGLIB 动态代理
        </a></li></ul></div></aside></div><div class="global-ui"></div></div>
    <script src="/note-pages/assets/js/app.05dcbd87.js" defer></script><script src="/note-pages/assets/js/3.4a2f67fd.js" defer></script><script src="/note-pages/assets/js/2.ab82720e.js" defer></script><script src="/note-pages/assets/js/141.c09f054f.js" defer></script>
  </body>
</html>
