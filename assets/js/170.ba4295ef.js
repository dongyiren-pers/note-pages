(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{1114:function(t,e,a){"use strict";a.r(e);var r=a(14),c=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"第7章-watch机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第7章-watch机制"}},[t._v("#")]),t._v(" 第7章 Watch机制")]),t._v(" "),a("p",[t._v("Zookeeper 提供了数据的发布/订阅功能，多个订阅者可同时监听某一特定主题对象，当该主题对象的自身状态发生变化时（例如节点内容改变、节点下的子节点列表改变等），会实时、主动通知所有订阅者。")]),t._v(" "),a("p",[t._v("Zookeeper 采用了 Watcher 机制实现数据的发布/订阅功能。该机制在被订阅对象发生变化时会异步通知客户端，因此客户端不必在 Watcher 注册后轮询阻塞，从而减轻了客户端压力。")]),t._v(" "),a("h2",{attrs:{id:"_7-1-watcher-的组成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-watcher-的组成"}},[t._v("#")]),t._v(" 7.1 Watcher 的组成")]),t._v(" "),a("p",[t._v("Watcher 实现由三个部分组成：")]),t._v(" "),a("ul",[a("li",[t._v("Zookeeper 服务端；")]),t._v(" "),a("li",[t._v("Zookeeper 客户端；")]),t._v(" "),a("li",[t._v("客户端的 ZKWatchManager 对象；")])]),t._v(" "),a("p",[t._v("客户端首先将 Watcher 注册到服务端，同时将 Watcher 对象保存到客户端的 Watch 管理器中。当 ZooKeeper 服务端监听的数据状态发生变化时，服务端会主动通知客户端，接着客户端的 Watch 管理器会触发相关 Watcher 来回调相应处理逻辑，从而完成整体的数据发布/订阅流程。")]),t._v(" "),a("p",[t._v("https://www.jianshu.com/p/c68b6b241943")])])}),[],!1,null,null,null);e.default=c.exports}}]);