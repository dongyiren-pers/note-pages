<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第3章 数据链路层 | 后端技术栈笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="/note-pages//s0.pstatp.com/cdn/expire-1-M/jquery/3.4.0/jquery.min.js"></script>
    <script src="/note-pages//s0.pstatp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" href="/note-pages//s0.pstatp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">
    <meta name="description" content="BackEnd Notes">
    
    <link rel="preload" href="/note-pages/assets/css/0.styles.167a34c7.css" as="style"><link rel="preload" href="/note-pages/assets/js/app.05dcbd87.js" as="script"><link rel="preload" href="/note-pages/assets/js/3.4a2f67fd.js" as="script"><link rel="preload" href="/note-pages/assets/js/2.ab82720e.js" as="script"><link rel="preload" href="/note-pages/assets/js/9.3209071f.js" as="script"><link rel="prefetch" href="/note-pages/assets/js/10.e11a80d9.js"><link rel="prefetch" href="/note-pages/assets/js/100.489cf69a.js"><link rel="prefetch" href="/note-pages/assets/js/101.560e37ea.js"><link rel="prefetch" href="/note-pages/assets/js/102.baaa4f6a.js"><link rel="prefetch" href="/note-pages/assets/js/103.262b6423.js"><link rel="prefetch" href="/note-pages/assets/js/104.ac33d7ce.js"><link rel="prefetch" href="/note-pages/assets/js/105.5e6ce18f.js"><link rel="prefetch" href="/note-pages/assets/js/106.a69322ef.js"><link rel="prefetch" href="/note-pages/assets/js/107.6cdb78ee.js"><link rel="prefetch" href="/note-pages/assets/js/108.1d720289.js"><link rel="prefetch" href="/note-pages/assets/js/109.58f7297c.js"><link rel="prefetch" href="/note-pages/assets/js/11.241a46da.js"><link rel="prefetch" href="/note-pages/assets/js/110.9cef761d.js"><link rel="prefetch" href="/note-pages/assets/js/111.c782138c.js"><link rel="prefetch" href="/note-pages/assets/js/112.40cb3b1a.js"><link rel="prefetch" href="/note-pages/assets/js/113.c367e40a.js"><link rel="prefetch" href="/note-pages/assets/js/114.a4a75db5.js"><link rel="prefetch" href="/note-pages/assets/js/115.a73cd469.js"><link rel="prefetch" href="/note-pages/assets/js/116.ad853155.js"><link rel="prefetch" href="/note-pages/assets/js/117.a82b2649.js"><link rel="prefetch" href="/note-pages/assets/js/118.8f896dd0.js"><link rel="prefetch" href="/note-pages/assets/js/119.374482b1.js"><link rel="prefetch" href="/note-pages/assets/js/12.ebe220d5.js"><link rel="prefetch" href="/note-pages/assets/js/120.89698284.js"><link rel="prefetch" href="/note-pages/assets/js/121.cbe50685.js"><link rel="prefetch" href="/note-pages/assets/js/122.7de2ac51.js"><link rel="prefetch" href="/note-pages/assets/js/123.a2d16009.js"><link rel="prefetch" href="/note-pages/assets/js/124.e1ba7cbe.js"><link rel="prefetch" href="/note-pages/assets/js/125.4e1e6d6a.js"><link rel="prefetch" href="/note-pages/assets/js/126.3db22af3.js"><link rel="prefetch" href="/note-pages/assets/js/127.937f4ffc.js"><link rel="prefetch" href="/note-pages/assets/js/128.0bad2e20.js"><link rel="prefetch" href="/note-pages/assets/js/129.75a99d25.js"><link rel="prefetch" href="/note-pages/assets/js/13.5ee7bef5.js"><link rel="prefetch" href="/note-pages/assets/js/130.599b6d3d.js"><link rel="prefetch" href="/note-pages/assets/js/131.687214bf.js"><link rel="prefetch" href="/note-pages/assets/js/132.8295c067.js"><link rel="prefetch" href="/note-pages/assets/js/133.854d61c0.js"><link rel="prefetch" href="/note-pages/assets/js/134.f3fc20e1.js"><link rel="prefetch" href="/note-pages/assets/js/135.2a5a690d.js"><link rel="prefetch" href="/note-pages/assets/js/136.6ba30378.js"><link rel="prefetch" href="/note-pages/assets/js/137.80d7c511.js"><link rel="prefetch" href="/note-pages/assets/js/138.0a25898e.js"><link rel="prefetch" href="/note-pages/assets/js/139.fb3c377f.js"><link rel="prefetch" href="/note-pages/assets/js/14.a561f8b3.js"><link rel="prefetch" href="/note-pages/assets/js/140.cbfdbe32.js"><link rel="prefetch" href="/note-pages/assets/js/141.c09f054f.js"><link rel="prefetch" href="/note-pages/assets/js/142.723bd973.js"><link rel="prefetch" href="/note-pages/assets/js/143.b31785f9.js"><link rel="prefetch" href="/note-pages/assets/js/144.69d3d121.js"><link rel="prefetch" href="/note-pages/assets/js/145.c4ee6aa0.js"><link rel="prefetch" href="/note-pages/assets/js/146.7f836a1c.js"><link rel="prefetch" href="/note-pages/assets/js/147.d4a57976.js"><link rel="prefetch" href="/note-pages/assets/js/148.b15e75eb.js"><link rel="prefetch" href="/note-pages/assets/js/149.94085ddc.js"><link rel="prefetch" href="/note-pages/assets/js/15.4ed118f1.js"><link rel="prefetch" href="/note-pages/assets/js/150.6751d41b.js"><link rel="prefetch" href="/note-pages/assets/js/151.bd60e322.js"><link rel="prefetch" href="/note-pages/assets/js/152.15caf78f.js"><link rel="prefetch" href="/note-pages/assets/js/153.131128fc.js"><link rel="prefetch" href="/note-pages/assets/js/154.b8ee2e7d.js"><link rel="prefetch" href="/note-pages/assets/js/155.8fa1e2e0.js"><link rel="prefetch" href="/note-pages/assets/js/156.25e2a796.js"><link rel="prefetch" href="/note-pages/assets/js/157.7137c9c3.js"><link rel="prefetch" href="/note-pages/assets/js/158.fdc18c40.js"><link rel="prefetch" href="/note-pages/assets/js/159.0dadb745.js"><link rel="prefetch" href="/note-pages/assets/js/16.818fc8bf.js"><link rel="prefetch" href="/note-pages/assets/js/160.05f7541c.js"><link rel="prefetch" href="/note-pages/assets/js/161.2a8c62a2.js"><link rel="prefetch" href="/note-pages/assets/js/162.5b9983b7.js"><link rel="prefetch" href="/note-pages/assets/js/163.b51a5538.js"><link rel="prefetch" href="/note-pages/assets/js/164.06c9f20a.js"><link rel="prefetch" href="/note-pages/assets/js/165.c25063f4.js"><link rel="prefetch" href="/note-pages/assets/js/166.6c570da5.js"><link rel="prefetch" href="/note-pages/assets/js/167.12fb6fb6.js"><link rel="prefetch" href="/note-pages/assets/js/168.d7dd27bc.js"><link rel="prefetch" href="/note-pages/assets/js/169.27f575fe.js"><link rel="prefetch" href="/note-pages/assets/js/17.9daf0c47.js"><link rel="prefetch" href="/note-pages/assets/js/170.ba4295ef.js"><link rel="prefetch" href="/note-pages/assets/js/171.3fb54078.js"><link rel="prefetch" href="/note-pages/assets/js/18.086ed162.js"><link rel="prefetch" href="/note-pages/assets/js/19.adca670c.js"><link rel="prefetch" href="/note-pages/assets/js/20.2e9ff004.js"><link rel="prefetch" href="/note-pages/assets/js/21.07830947.js"><link rel="prefetch" href="/note-pages/assets/js/22.609929cb.js"><link rel="prefetch" href="/note-pages/assets/js/23.d83b832f.js"><link rel="prefetch" href="/note-pages/assets/js/24.592e8014.js"><link rel="prefetch" href="/note-pages/assets/js/25.9d28bb6f.js"><link rel="prefetch" href="/note-pages/assets/js/26.fd4195d5.js"><link rel="prefetch" href="/note-pages/assets/js/27.ca60e875.js"><link rel="prefetch" href="/note-pages/assets/js/28.c2cd75e6.js"><link rel="prefetch" href="/note-pages/assets/js/29.4213d132.js"><link rel="prefetch" href="/note-pages/assets/js/30.c6ee0ead.js"><link rel="prefetch" href="/note-pages/assets/js/31.eea6a542.js"><link rel="prefetch" href="/note-pages/assets/js/32.1ffdceaf.js"><link rel="prefetch" href="/note-pages/assets/js/33.0425748b.js"><link rel="prefetch" href="/note-pages/assets/js/34.5dd0d81d.js"><link rel="prefetch" href="/note-pages/assets/js/35.773df14e.js"><link rel="prefetch" href="/note-pages/assets/js/36.5db32ea2.js"><link rel="prefetch" href="/note-pages/assets/js/37.1106162c.js"><link rel="prefetch" href="/note-pages/assets/js/38.793ba7d0.js"><link rel="prefetch" href="/note-pages/assets/js/39.488fb9a5.js"><link rel="prefetch" href="/note-pages/assets/js/4.550e6883.js"><link rel="prefetch" href="/note-pages/assets/js/40.9c05b0ae.js"><link rel="prefetch" href="/note-pages/assets/js/41.ae198526.js"><link rel="prefetch" href="/note-pages/assets/js/42.d815456e.js"><link rel="prefetch" href="/note-pages/assets/js/43.1808aff8.js"><link rel="prefetch" href="/note-pages/assets/js/44.c26d9bde.js"><link rel="prefetch" href="/note-pages/assets/js/45.fae5f755.js"><link rel="prefetch" href="/note-pages/assets/js/46.703057c9.js"><link rel="prefetch" href="/note-pages/assets/js/47.ed3a23ce.js"><link rel="prefetch" href="/note-pages/assets/js/48.c5a46ee8.js"><link rel="prefetch" href="/note-pages/assets/js/49.b04c1681.js"><link rel="prefetch" href="/note-pages/assets/js/5.869d288f.js"><link rel="prefetch" href="/note-pages/assets/js/50.249fc2a7.js"><link rel="prefetch" href="/note-pages/assets/js/51.cab74632.js"><link rel="prefetch" href="/note-pages/assets/js/52.e2f231b3.js"><link rel="prefetch" href="/note-pages/assets/js/53.6241e308.js"><link rel="prefetch" href="/note-pages/assets/js/54.7d29c5c0.js"><link rel="prefetch" href="/note-pages/assets/js/55.a9050f95.js"><link rel="prefetch" href="/note-pages/assets/js/56.75828a09.js"><link rel="prefetch" href="/note-pages/assets/js/57.b3f75d67.js"><link rel="prefetch" href="/note-pages/assets/js/58.0cf3bd1c.js"><link rel="prefetch" href="/note-pages/assets/js/59.19f18f1f.js"><link rel="prefetch" href="/note-pages/assets/js/6.d879438f.js"><link rel="prefetch" href="/note-pages/assets/js/60.61940d92.js"><link rel="prefetch" href="/note-pages/assets/js/61.bc890bb0.js"><link rel="prefetch" href="/note-pages/assets/js/62.f487437c.js"><link rel="prefetch" href="/note-pages/assets/js/63.4a91369b.js"><link rel="prefetch" href="/note-pages/assets/js/64.1b0770e4.js"><link rel="prefetch" href="/note-pages/assets/js/65.b56e2b22.js"><link rel="prefetch" href="/note-pages/assets/js/66.dd49594c.js"><link rel="prefetch" href="/note-pages/assets/js/67.22efede4.js"><link rel="prefetch" href="/note-pages/assets/js/68.0d22a8a4.js"><link rel="prefetch" href="/note-pages/assets/js/69.aec9bfeb.js"><link rel="prefetch" href="/note-pages/assets/js/7.e3626849.js"><link rel="prefetch" href="/note-pages/assets/js/70.0c53c20d.js"><link rel="prefetch" href="/note-pages/assets/js/71.6d6db7d6.js"><link rel="prefetch" href="/note-pages/assets/js/72.fdcfb985.js"><link rel="prefetch" href="/note-pages/assets/js/73.a390b48d.js"><link rel="prefetch" href="/note-pages/assets/js/74.e817987f.js"><link rel="prefetch" href="/note-pages/assets/js/75.f144cf4f.js"><link rel="prefetch" href="/note-pages/assets/js/76.7be2f5f1.js"><link rel="prefetch" href="/note-pages/assets/js/77.6568d596.js"><link rel="prefetch" href="/note-pages/assets/js/78.4ff63ca8.js"><link rel="prefetch" href="/note-pages/assets/js/79.daaf791e.js"><link rel="prefetch" href="/note-pages/assets/js/8.f9f716a1.js"><link rel="prefetch" href="/note-pages/assets/js/80.a0605696.js"><link rel="prefetch" href="/note-pages/assets/js/81.ecb125f5.js"><link rel="prefetch" href="/note-pages/assets/js/82.b64b1c42.js"><link rel="prefetch" href="/note-pages/assets/js/83.d13b7f19.js"><link rel="prefetch" href="/note-pages/assets/js/84.c584da75.js"><link rel="prefetch" href="/note-pages/assets/js/85.7992353f.js"><link rel="prefetch" href="/note-pages/assets/js/86.17ad6399.js"><link rel="prefetch" href="/note-pages/assets/js/87.289f9f2f.js"><link rel="prefetch" href="/note-pages/assets/js/88.3496d6e2.js"><link rel="prefetch" href="/note-pages/assets/js/89.0d0c778d.js"><link rel="prefetch" href="/note-pages/assets/js/90.245b9fda.js"><link rel="prefetch" href="/note-pages/assets/js/91.806af5f2.js"><link rel="prefetch" href="/note-pages/assets/js/92.8a10f401.js"><link rel="prefetch" href="/note-pages/assets/js/93.ea90ae18.js"><link rel="prefetch" href="/note-pages/assets/js/94.98cc66ef.js"><link rel="prefetch" href="/note-pages/assets/js/95.836e96c5.js"><link rel="prefetch" href="/note-pages/assets/js/96.d4dd3eee.js"><link rel="prefetch" href="/note-pages/assets/js/97.e4275cb9.js"><link rel="prefetch" href="/note-pages/assets/js/98.0e320d92.js"><link rel="prefetch" href="/note-pages/assets/js/99.e6f77650.js">
    <link rel="stylesheet" href="/note-pages/assets/css/0.styles.167a34c7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-pages/" class="home-link router-link-active"><!----> <span class="site-name">后端技术栈笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-pages/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          算法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/algorithm/5e022a/" class="nav-link">
  算法
</a></li></ul></li><li class="dropdown-item"><h4>
          计算机网络
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/network/a918ca/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/note-pages/http/" class="nav-link">
  HTTP
</a></li><li class="dropdown-subitem"><a href="/note-pages/tcp-ip/" class="nav-link">
  TCP/IP
</a></li><li class="dropdown-subitem"><a href="/note-pages/socket/" class="nav-link">
  Socket
</a></li></ul></li><li class="dropdown-item"><h4>
          操作系统
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/operating-system/knuk3x/" class="nav-link">
  操作系统
</a></li><li class="dropdown-subitem"><a href="/note-pages/linux/" class="nav-link">
  Linux
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/database-system/fyl5c1/" class="nav-link">
  数据库系统
</a></li><li class="dropdown-subitem"><a href="/note-pages/computer-systems/" class="nav-link">
  计算机系统
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程语言" class="mobile-dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/java/5ddf72/" class="nav-link">
  Java基础
</a></li><li class="dropdown-subitem"><a href="/note-pages/java-collection/" class="nav-link">
  Java集合
</a></li><li class="dropdown-subitem"><a href="/note-pages/java-concurrency/" class="nav-link">
  Java并发
</a></li><li class="dropdown-subitem"><a href="/note-pages/jvm/" class="nav-link">
  JVM
</a></li></ul></li><li class="dropdown-item"><h4>
          C/C++
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/cpp/" class="nav-link">
  C++基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Go
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/go/" class="nav-link">
  Go基础
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/assembly/" class="nav-link">
  Assembly
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发框架" class="dropdown-title"><span class="title">开发框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发框架" class="mobile-dropdown-title"><span class="title">开发框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/spring/" class="nav-link">
  Spring
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/mysql/1dh29a/" class="nav-link">
  MySQL
</a></li><li class="dropdown-subitem"><a href="/note-pages/redis/" class="nav-link">
  Redis
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构设计" class="dropdown-title"><span class="title">架构设计</span> <span class="arrow down"></span></button> <button type="button" aria-label="架构设计" class="mobile-dropdown-title"><span class="title">架构设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          分布式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/distributed-system/01-理论基础/" class="nav-link">
  分布式系统
</a></li></ul></li><li class="dropdown-item"><h4>
          微服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/micro-service-in-action/" class="nav-link">
  微服务实战
</a></li></ul></li><li class="dropdown-item"><h4>
          消息队列
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/kafka/" class="nav-link">
  Kafka
</a></li><li class="dropdown-subitem"><a href="/note-pages/rocket-mq/" class="nav-link">
  RocketMQ
</a></li></ul></li><li class="dropdown-item"><h4>
          注册中心
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/zookeeper/" class="nav-link">
  ZooKeeper
</a></li><li class="dropdown-subitem"><a href="/note-pages/eureka/" class="nav-link">
  Eureka
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发工具" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-pages/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note-pages/docker/34kd5q/" class="nav-link">
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="理论方法" class="dropdown-title"><span class="title">理论方法</span> <span class="arrow down"></span></button> <button type="button" aria-label="理论方法" class="mobile-dropdown-title"><span class="title">理论方法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-pages/design-pattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/note-pages/software-engineering/n4r1lx/" class="nav-link">
  软件工程
</a></li></ul></div></div><div class="nav-item"><a href="/note-pages/interview/f05h67/" class="nav-link">
  面试通关
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note-pages/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          算法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/algorithm/5e022a/" class="nav-link">
  算法
</a></li></ul></li><li class="dropdown-item"><h4>
          计算机网络
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/network/a918ca/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/note-pages/http/" class="nav-link">
  HTTP
</a></li><li class="dropdown-subitem"><a href="/note-pages/tcp-ip/" class="nav-link">
  TCP/IP
</a></li><li class="dropdown-subitem"><a href="/note-pages/socket/" class="nav-link">
  Socket
</a></li></ul></li><li class="dropdown-item"><h4>
          操作系统
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/operating-system/knuk3x/" class="nav-link">
  操作系统
</a></li><li class="dropdown-subitem"><a href="/note-pages/linux/" class="nav-link">
  Linux
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/database-system/fyl5c1/" class="nav-link">
  数据库系统
</a></li><li class="dropdown-subitem"><a href="/note-pages/computer-systems/" class="nav-link">
  计算机系统
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程语言" class="mobile-dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/java/5ddf72/" class="nav-link">
  Java基础
</a></li><li class="dropdown-subitem"><a href="/note-pages/java-collection/" class="nav-link">
  Java集合
</a></li><li class="dropdown-subitem"><a href="/note-pages/java-concurrency/" class="nav-link">
  Java并发
</a></li><li class="dropdown-subitem"><a href="/note-pages/jvm/" class="nav-link">
  JVM
</a></li></ul></li><li class="dropdown-item"><h4>
          C/C++
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/cpp/" class="nav-link">
  C++基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Go
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/go/" class="nav-link">
  Go基础
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/assembly/" class="nav-link">
  Assembly
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发框架" class="dropdown-title"><span class="title">开发框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发框架" class="mobile-dropdown-title"><span class="title">开发框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/spring/" class="nav-link">
  Spring
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/mysql/1dh29a/" class="nav-link">
  MySQL
</a></li><li class="dropdown-subitem"><a href="/note-pages/redis/" class="nav-link">
  Redis
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构设计" class="dropdown-title"><span class="title">架构设计</span> <span class="arrow down"></span></button> <button type="button" aria-label="架构设计" class="mobile-dropdown-title"><span class="title">架构设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          分布式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/distributed-system/01-理论基础/" class="nav-link">
  分布式系统
</a></li></ul></li><li class="dropdown-item"><h4>
          微服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/micro-service-in-action/" class="nav-link">
  微服务实战
</a></li></ul></li><li class="dropdown-item"><h4>
          消息队列
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/kafka/" class="nav-link">
  Kafka
</a></li><li class="dropdown-subitem"><a href="/note-pages/rocket-mq/" class="nav-link">
  RocketMQ
</a></li></ul></li><li class="dropdown-item"><h4>
          注册中心
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-pages/zookeeper/" class="nav-link">
  ZooKeeper
</a></li><li class="dropdown-subitem"><a href="/note-pages/eureka/" class="nav-link">
  Eureka
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发工具" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-pages/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note-pages/docker/34kd5q/" class="nav-link">
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="理论方法" class="dropdown-title"><span class="title">理论方法</span> <span class="arrow down"></span></button> <button type="button" aria-label="理论方法" class="mobile-dropdown-title"><span class="title">理论方法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-pages/design-pattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/note-pages/software-engineering/n4r1lx/" class="nav-link">
  软件工程
</a></li></ul></div></div><div class="nav-item"><a href="/note-pages/interview/f05h67/" class="nav-link">
  面试通关
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/note-pages/network/a918ca/" class="sidebar-link">第1章 计算机网络体系结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/network/a918ca/#_1-1-计算机网络概述" class="sidebar-link">1.1 计算机网络概述</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/a918ca/#_1-2-计算机网络体系结构与参考模型" class="sidebar-link">1.2 计算机网络体系结构与参考模型</a></li></ul></li><li><a href="/note-pages/network/02-物理层.html" class="sidebar-link">第2章 物理层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/network/02-物理层.html#_2-1-通信基础" class="sidebar-link">2.1 通信基础</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/02-物理层.html#_2-2-传输介质" class="sidebar-link">2.2 传输介质</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/02-物理层.html#_2-3-物理层设备" class="sidebar-link">2.3 物理层设备</a></li></ul></li><li><a href="/note-pages/network/o99i5d/" aria-current="page" class="active sidebar-link">第3章 数据链路层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/network/o99i5d/#_3-1-数据链路层功能概述" class="sidebar-link">3.1 数据链路层功能概述</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/o99i5d/#_3-2-封装成帧" class="sidebar-link">3.2 封装成帧</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/o99i5d/#_3-3-差错控制" class="sidebar-link">3.3 差错控制</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/o99i5d/#_3-4-流量控制与可靠传输机制" class="sidebar-link">3.4 流量控制与可靠传输机制</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/o99i5d/#_3-5-介质访问控制" class="sidebar-link">3.5 介质访问控制</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/o99i5d/#_3-6-局域网" class="sidebar-link">3.6 局域网</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/o99i5d/#_3-7-广域网" class="sidebar-link">3.7 广域网</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/o99i5d/#_3-8-数据链路层设备" class="sidebar-link">3.8 数据链路层设备</a></li></ul></li><li><a href="/note-pages/network/otgrds/" class="sidebar-link">第4章 网络层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/network/otgrds/#_4-1-网络层的功能" class="sidebar-link">4.1 网络层的功能</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/otgrds/#_4-2-路由算法" class="sidebar-link">4.2 路由算法</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/otgrds/#_4-3-ipv4" class="sidebar-link">4.3 IPv4</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/otgrds/#_4-4-ipv6" class="sidebar-link">4.4 IPv6</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/otgrds/#_4-5-路由协议" class="sidebar-link">4.5 路由协议</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/otgrds/#_4-6-ip-组播" class="sidebar-link">4.6 IP 组播</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/otgrds/#_4-7-移动-ip" class="sidebar-link">4.7 移动 IP</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/otgrds/#_4-7-网络层设备" class="sidebar-link">4.7 网络层设备</a></li></ul></li><li><a href="/note-pages/network/o252om/" class="sidebar-link">第5章 传输层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/network/o252om/#_5-1-传输层提供的服务" class="sidebar-link">5.1 传输层提供的服务</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/o252om/#_5-2-udp-协议" class="sidebar-link">5.2 UDP 协议</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/o252om/#_5-3-tcp-协议" class="sidebar-link">5.3 TCP 协议</a></li></ul></li><li><a href="/note-pages/network/jn809u/" class="sidebar-link">第6章 应用层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-pages/network/jn809u/#_6-1-网络应用模型" class="sidebar-link">6.1 网络应用模型</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/jn809u/#_6-2-域名系统-dns" class="sidebar-link">6.2 域名系统（DNS）</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/jn809u/#_6-3-文件传输协议-ftp" class="sidebar-link">6.3 文件传输协议（FTP）</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/jn809u/#_6-4-电子邮件" class="sidebar-link">6.4 电子邮件</a></li><li class="sidebar-sub-header"><a href="/note-pages/network/jn809u/#_6-5-万维网-www" class="sidebar-link">6.5 万维网（WWW）</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第3章-数据链路层"><a href="#第3章-数据链路层" class="header-anchor">#</a> 第3章 数据链路层</h1> <p>一些概念：</p> <ul><li><strong>结点</strong>：主机、路由器。</li> <li><strong>链路</strong>：网络中两个结点之间的物理通道，链路的传输介质主要有双绞线、光纤和微波。分为有线链路、无线链路。</li> <li><strong>数据链路</strong>：网络中两个结点之间的逻辑通道，把实现控制数据传输协议的硬件和软件加到链路上就构成数据链路。</li> <li><strong>帧</strong>：链路层的协议数据单元，封装网络层数据报。</li></ul> <h2 id="_3-1-数据链路层功能概述"><a href="#_3-1-数据链路层功能概述" class="header-anchor">#</a> 3.1 数据链路层功能概述</h2> <p>数据链路层在物理层提供服务的基础上向网络层提供服务，其最基本的服务是将源自网络层来的数据可靠地传输到相邻节点的目标机网络层。其主要作用是 <strong>加强物理层传输原始比特流的功能，将物理层提供的可能出错的物理连接改造成为逻辑上无差错的数据链路</strong>，使之对网络层表现为一条无差错的链路。</p> <h3 id="基本任务"><a href="#基本任务" class="header-anchor">#</a> 基本任务</h3> <p>对网络层而言， 数据链路层的基本任务是将源机器中来自网络层的数据传输到目标机器的网络层。数据链路层通常可为网络层提供如下服务：</p> <ul><li><strong>无确认的无连接服务</strong>。 源机器发送数据帧时不需先建立链路连接，目的机器收到数据帧时不需发回确认。对丢失的帧，数据链路层不负责重发而交给上层处理。 适用于实时通信或误码率较低的通信信道，如以太网。</li> <li><strong>有确认的无连接服务</strong>。 源机器发送数据帧时不需先建立链路连接， 但目的机器收到数据帧时必须发回确认。源机器在所规定的时间内未收到确定信号时， 就重传丢失的帧， 以提高传输的可靠性。 该服务适用于误码率较高的通信信道， 如无线通信。</li> <li><strong>有确认的面向连接服务</strong>。 帧传输过程分为三个阶段：建立数据链路、传输帧、释放数据链路。目的机器对收到的每一帧都要给出确认， 源机器收到确认后才能发送下一帧， 因而该服务的可靠性最高。 该服务适用于通信要求（可靠性、实时性）较高的场合。</li></ul> <blockquote><p><strong>注意</strong>： 有连接就一定要有确认， 即不存在无确认的面向连接的服务。</p></blockquote> <h3 id="功能"><a href="#功能" class="header-anchor">#</a> 功能</h3> <p>数据链路层的三个基本问题是 <strong>封装成帧、透明传输、差错监测</strong>。</p> <div id="链路管理" class="anchor">链路管理</div><p>数据链路层连接的建立、维持和释放过程称为链路管理，它主要用于面向连接的服务。</p> <div id="帧定界、帧同步与透明传输" class="anchor">帧定界、帧同步与透明传输</div><p>两台主机之间传输信息时， 必须将网络层的分组封装成帧，以帧的格式进行传送。 将一段数据的前后分别添加首部和尾部， 就构成了帧。 因此， 帧长等于数据部分的长度加上首部和尾部的长度。 首部和尾部中含有很多控制信息， 它们的一个重要作用是 <strong>确定帧的界限</strong>， 即 <strong>帧定界</strong>。</p> <p><strong>帧同步</strong> 指的是接收方应能 <strong>从接收到的二进制比特流中区分出帧的起始与终止</strong>。</p> <p>如果在数据中恰好出现与帧定界符相同的比特组合（会误认为 “传输结束” 而丢弃后面的数据），那么就要采取有效的措施解决这个问题， 即 <strong>透明传输</strong>。更确切地说，透明传输就是不管所传数据是什么样的比特组合，都应当能在链路上传送。</p> <div id="流量控制" class="anchor">流量控制</div><p>流量控制实际上就是 <strong>限制发送方的数据流量</strong>，使其发送速率不超过接收方的接收能力。</p> <div id="差错控制" class="anchor">差错控制</div><p>由于信道噪声等各种原因，帧在传输过程中可能会出现错误。 用以使发送方 <strong>确定接收方是否正确收到</strong> 由其发送的数据的方法称为差错控制。通常，这些错误可分为 <strong>位错</strong> 和 <strong>帧错</strong>。</p> <h2 id="_3-2-封装成帧"><a href="#_3-2-封装成帧" class="header-anchor">#</a> 3.2 封装成帧</h2> <p><strong>封装成帧</strong>：就是在一段数据的前后部分添加首部和尾部，这样就构成了一个帧。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和结束。</p> <h3 id="字符计数法"><a href="#字符计数法" class="header-anchor">#</a> 字符计数法</h3> <p>帧首部使用一个计数字段（第一个字节，八位）来标明帧内字符数。</p> <p><img src="/note-pages/assets/img/image-20221110132932369.d5bb26ce.png" alt="image-20221110132932369"></p> <p>如果计数字段出错，则失去划分帧边界依据，彻底失去帧同步。</p> <h3 id="字符填充的首尾定界符法"><a href="#字符填充的首尾定界符法" class="header-anchor">#</a> 字符填充的首尾定界符法</h3> <p>字符填充法使用特定字符来定界一帧的开始与结束。控制字符 SOH 放在帧的最前面，表示帧的首部开始，控制字符 EOT 表示帧的结束。</p> <p>为了使信息位中出现的特殊字符不被误判为帧的首尾定界符，可在特殊字符前面填充一个转义字符（ESC）来加以区分，以实现数据的透明传输。接收方收到转义字符后，就知道其后面紧跟的是数据信息，而不是控制信息。</p> <p><img src="/note-pages/assets/img/image-20221110133734756.ef22dd7d.png" alt="image-20221110133734756"></p> <h3 id="零比特填充的首尾标志法"><a href="#零比特填充的首尾标志法" class="header-anchor">#</a> 零比特填充的首尾标志法</h3> <p>零比特填充法允许数据帧包含任意个数的比特，也允许每个字符的编码包含任意个数的比特。<strong>它使用一个特定的比特模式，即 01111110 来标志一帧的开始和结束</strong>。为了不使信息位中出现的比特流 01111110 被误判为帧的首尾标志，<strong>发送方的数据链路层在信息位中遇到 5</strong> <strong>个连续的 “1” 时，将在其后插入一个 “0”；而接收方做该过程的逆操作，即每收到 5 个连续的 “1” 时，自动删除后面紧跟的 “0”</strong>，以恢复原信息。</p> <p><img src="/note-pages/assets/img/image-20221110134125017.ed2ab03c.png" alt="image-20221110134125017"></p> <h3 id="违规编码法"><a href="#违规编码法" class="header-anchor">#</a> 违规编码法</h3> <p>在 <strong>物理层</strong> 进行比特编码时，通常采用违规编码法。</p> <p>例如，曼彻斯特编码方法将数据比特 “1” 编码成 “高-低” 电平对，将数据比特 “0” 编码成 “低-高” 电平对，而 “高-高” 电平对和 “低-低” 电平对在数据比特中是违规的（即没有采用）。可以借用这些违规编码序列来定界帧的起始和终止。</p> <blockquote><p>由于字节计数法中计数字段的脆弱性和字符填充法实现上的复杂性与不兼容性， 目前较常用的组帧方法是比特填充法和违规编码法。</p></blockquote> <h2 id="_3-3-差错控制"><a href="#_3-3-差错控制" class="header-anchor">#</a> 3.3 差错控制</h2> <p>实际通信链路都不是理想的，比特在传输过程中可能会产生差错，1 可能会变成 0，0 也可能会变成 1，这就是 <strong>比特差错</strong>。比特差错是传输差错中的一种，本节仅讨论比特差错。</p> <h3 id="检错编码"><a href="#检错编码" class="header-anchor">#</a> 检错编码</h3> <p>检错编码都采用冗余编码技术，其核心思想是在有效数据（信息位）被发送前，先按某种关系附加一定的冗余位，构成一个符合某一规则的码字后再发送。当要发送的有效数据变化时，相应的冗余位也随之变化，使得码字遵从不变的规则。接收端根据收到的码字是否仍符合原规则来判断是否出错。</p> <p>常见的检错编码有 <strong>奇偶校验码</strong> 和 <strong>循环冗余码</strong>。</p> <div id="奇偶校验码" class="anchor">奇偶校验码</div><p>奇偶校验码是奇校验码和偶校验码的统称，是一种最基本的检错码。</p> <p>奇偶校验码由 <strong>n-1 位信息元</strong> 和 <strong>1 位校验元</strong> 组成：</p> <ul><li>如果是奇校验码，那么在附加一个校验元后，码长为 n 的码字中 “1” 的个数为奇数；</li> <li>如果是偶校验码，那么在附加一个校验元以后，码长为 n 的码字中 “1” 的个数为偶数。</li></ul> <p>奇偶校验码 <strong>只能检测奇数位的出错情况</strong>，不能发现偶数位的出错情况，同时并不知道哪些位错了。</p> <div id="循环冗余码" class="anchor">循环冗余码</div><p>循环冗余码（Cyclic Redundancy Code，CRC）又称多项式码，任何一个由二进制数位串组成的代码都可以与一个只含有 0 和 1 两个系数的多项式建立一一对应关系。一个 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span></span> 位帧可以视为从 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">X^{k-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8491079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span> 到 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">X^0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span> 的 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span></span> 次多项式的系数序列， 这个多项式的阶数为 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k-1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span>。</p> <p>给定一个 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span></span> bit 的帧或报文，发送器生成一个 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span></span> bit 的序列，称为 <strong>帧检验序列</strong>（FCS）。这样所形成的帧将由 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>+</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">m + r</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span></span> 比特组成。发送方和接收方事先商定一个多项式 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span></span>（最高位和最低位必须为 1）， 使这个带检验码的帧刚好能被预先确定的多项式 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span></span> 整除。接收方用相同的多项式去除收到的帧，如果无余数，那么认为无差错。</p> <p>假设一个帧有 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span> 位， 其对应的多项式为 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span></span>，则 <strong>计算冗余码的步骤如下：</strong></p> <ul><li>加 0。 假设 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span></span> 的阶为 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span></span>，在帧的低位端加上 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span></span> 个 0。</li> <li>模 2 除。利用模 2 除法（即异或操作），用 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span></span> 对应的数据串去除第一步中计算出的数据串，得到的余数即为冗余码（共 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span></span> 位， 前面的 0 不可省略）</li></ul> <p><img src="/note-pages/assets/img/image-20240117204803391.a03c986e.png" alt=""></p> <p>通过循环冗余码（CRC）的检错技术，数据链路层做到了对帧的 <strong>无差错接收</strong>。</p> <h3 id="纠错编码"><a href="#纠错编码" class="header-anchor">#</a> 纠错编码</h3> <p>在数据通信的过程中，解决差错问题的一种方法是在每个要发送的数据块上附加足够的冗余信息，使接收方能够推导出发送方实际送出的应该是什么样的比特串。</p> <div id="海明码" class="anchor">海明码</div><p>在有效信息位中加入几个校验位形成海明码，并把海明码的每个二进制位分配到几个奇偶校验组中。当某一位出错后，就会引起有关的几个校验位的值发生变化，这不但可以发现错位，而且能指出错位的位置，为自动纠错提供依据。</p> <h2 id="_3-4-流量控制与可靠传输机制"><a href="#_3-4-流量控制与可靠传输机制" class="header-anchor">#</a> 3.4 流量控制与可靠传输机制</h2> <h3 id="流量控制、可靠传输与滑动窗口机制"><a href="#流量控制、可靠传输与滑动窗口机制" class="header-anchor">#</a> 流量控制、可靠传输与滑动窗口机制</h3> <p>流量控制涉及对链路上的帧的发送速率的控制，以使接收方有足够的缓冲空间来接收每个帧。流量控制的基本方法是由接收方控制发送方发送数据的速率，常见的方式有两种：<strong>停止-等待协议</strong> 和 <strong>滑动窗口协议</strong>。</p> <div id="停止-等待流量控制基本原理" class="anchor">停止-等待流量控制基本原理</div><p>发送方每发送一帧，都要等待接收方的应答信号，之后才能发送下一帧，传输效率很低。</p> <div id="滑动窗口流量控制基本原理" class="anchor">滑动窗口流量控制基本原理</div><p>在任意时刻，发送方都维持一组连续的允许发送的帧的序号，称为 <strong>发送窗口</strong>；同时接收方也维持一组连续的允许接收帧的序号，称为 <strong>接收窗口</strong>。</p> <p><strong>发送窗口</strong> 用来对发送方进行流量控制，发送窗口的大小 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">W_T</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 代表在还未收到对方确认信息的情况下发送方最多还可以发送多少个数据帧。</p> <p><strong>接收窗口</strong> 用来控制接收方可以接收哪些数据帧和不可以接收哪些帧。在接收方，只有收到的数据帧的序号落入接收窗口内时，才允许将该数据帧收下。若接收到的数据帧落在接收窗口之外，则一律将其丢弃。</p> <p>滑动窗口有以下重要特性：</p> <ul><li>只有接收窗口向前滑动（同时接收方发送了确认帧）时，发送窗口才有可能（只有发送方收到确认帧后才一定）向前滑动。</li> <li>从滑动窗口的概念看，<strong>停止-等待协议</strong>、<strong>后退 N 帧协议</strong> 和 <strong>选择重传协议</strong> 只在发送窗口大小与接收窗口大小上有所差别:
<ul><li>停止-等待协议：发送窗口大小 = 1，接收窗口大小 = 1。</li> <li>后退 N 帧协议：发送窗口大小 &gt; 1，接收窗口大小 = 1。</li> <li>选择重传协议：发送窗口大小 &gt; 1，接收窗口大小 &gt; 1。</li></ul></li> <li>接收窗口的大小为 1 时， 可保证帧的有序接收。</li> <li>数据链路层的滑动窗口协议中，窗口的大小在传输过程中是固定的（与传输层的滑动窗口协议不同）。</li></ul> <div id="可靠传输机制" class="anchor">可靠传输机制</div><p>数据链路层的可靠传输通常使用确认和超时重传两种机制来完成。</p> <ul><li><strong>确认</strong> 是一种无数据的控制帧，这种控制帧使得接收方可以让发送方知道哪些内容被正确接收。有些情况下为了提高传输效率，将确认捎带在一个回复帧中，称为捎带确认。</li> <li><strong>超时重传</strong> 是指发送方在发送某个数据帧后就开启一个计时器，在一定时间内如果没有得到发送的数据帧的确认帧，那么就重新发送该数据帧，直到发送成功为止。</li></ul> <p><strong>自动重传请求</strong>（Automatic Repeat reQuest，ARQ）通过接收方请求发送方 <strong>重传出错的数据帧</strong> 来恢复出错的帧，是通信中用于处理信道所带来差错的方法之一。</p> <p>传统自动重传请求分为三种，即 <strong>停止-等待</strong>（Stop-and-Wait）ARQ、<strong>后退 N 帧</strong>（Go-Back-N）ARQ 和 <strong>选择性重传</strong>（Selective Repeat）ARQ。后两种协议是滑动窗口技术与请求重发技术的结合，由于窗口尺寸开到足够大时，帧在线路上可以连续地流动，因此又称其为连续 ARQ 协议。注意，在数据链路层中流量控制机制和可靠传输机制是交织在一起的。</p> <h3 id="停止-等待协议"><a href="#停止-等待协议" class="header-anchor">#</a> 停止-等待协议</h3> <p><strong>停止-等待协议</strong>：<strong>源站发送单个帧后必须等待确认</strong>，在目的站的回答到达源站之前，源站不能发送其他的数据帧。<strong>停止-等待协议相当于发送窗口和接收窗口大小均为 1 的滑动窗口协议。</strong></p> <p>在停止-等待协议中，除数据帧丢失外，还可能出现以下两种差错。</p> <ul><li>到达目的站的帧可能已遭破坏，接收站简单地将该帧丢弃。为了对付这种可能发生的情况，源站装备了计时器。在一个帧发送之后，源站等待确认，如果在计时器计满时仍未收到确认，那么再次发送相同的帧。如此重复，直到该数据帧无错误地到达为止。</li> <li>数据帧正确而确认帧被破坏，此时接收方已收到正确的数据帧，但发送方收不到确认帧，因此发送方会重传已被接收的数据帧，接收方收到同样的数据帧时会丢弃该帧，并重传一个该帧对应的确认帧。</li></ul> <p>在停止-等待协议中，若连续出现相同发送序号的数据帧，表明发送端进行了 <strong>超时重传</strong>。连续出现相同序号的确认帧时，表明接收端收到了 <strong>重复帧</strong>。</p> <h3 id="后退-n-帧协议-gbn"><a href="#后退-n-帧协议-gbn" class="header-anchor">#</a> 后退 N 帧协议（GBN）</h3> <p><strong>后退 N 帧协议</strong>：发送方无须在收到上一帧的 ACK 后才能开始发送下一帧，而是可以连续发送帧。当接收方检测出失序的信息帧后，要求发送方 <strong>重发最后一个正确接收的信息帧之后的所有未被确认的帧</strong>。</p> <p>当发送方发送了 N 个帧后，若发现该 N 个帧的前一个帧在计时器超时后仍未返回其确认信息，则该帧被判为出错或丢失，此时发送方就不得不重传该出错帧及随后的 N 个帧。</p> <p><img src="/note-pages/assets/img/image-20221112163358508.c96dfbe1.png" alt="image-20221112163358508"></p> <p>后退 N 帧协议一方面因连续发送数据帧而提高了信道的利用率，另一方面在重传时又必须把原来已传送正确的数据帧进行重传（仅因这些数据帧的前面有一个数据帧出了错），这种做法又使传送效率降低。</p> <p>由此可见，若信道的传输质量很差导致误码率较大时，后退 N 帧协议不一定优于停止-等待协议。</p> <h3 id="选择重传协议-sr"><a href="#选择重传协议-sr" class="header-anchor">#</a> 选择重传协议（SR）</h3> <p>为进一步提高信道的利用率，可设法 <strong>只重传出现差错的数据帧或计时器超时的数据帧</strong>，但此时必须加大接收窗口，以便先收下发送序号不连续但仍处在接收窗口中的那些数据帧。等到所缺序号的数据帧收到后再一并送交主机。这就是 <strong>选择重传 ARQ 协议</strong>。</p> <p><strong>选择重传协议</strong>：每个发送缓冲区对应一个计时器，当计时器超时时，缓冲区的帧就会重传。另外，该协议使用了比上述其他协议更有效的差错处理策略，即一旦接收方怀疑帧出错，就会发一个 <strong>否定帧 NAK</strong> 给发送方，要求发送方对 NAK 中指定的帧进行重传。</p> <p><img src="/note-pages/assets/img/image-20221112164644903.b5dabf0d.png" alt="image-20221112164644903"></p> <p>选择重传协议可以避免重复传送那些本已正确到达接收端的数据帧，但在接收端要设置具有相当容量的缓冲区来暂存那些未按序正确收到的帧。</p> <div id="窗口大小" class="anchor">窗口大小</div><p>发送窗口尺寸 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">W_T</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 和接收窗口尺寸 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">W_R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 都大于1，一次可接收发送多个帧。</p> <p><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>=</mo><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">W_T = W_R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 时最好，<strong>若采用 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span></span> 比特对帧编号，则需满足 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>T</mi><mi>max</mi><mo>⁡</mo></mrow></msub><mo>=</mo><msub><mi>W</mi><mrow><mi>R</mi><mi>max</mi><mo>⁡</mo></mrow></msub><mo>=</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">W_{T \max }=W_{R \max }=2^{n-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mop mtight"><span class="mtight">m</span><span class="mtight">a</span><span class="mtight">x</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mop mtight"><span class="mtight">m</span><span class="mtight">a</span><span class="mtight">x</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span>， 且 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>+</mo><msub><mi>W</mi><mi>R</mi></msub><mo>≤</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">W_{T}+W_{R}\leq 2^{n}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></span>。</strong></p> <h2 id="_3-5-介质访问控制"><a href="#_3-5-介质访问控制" class="header-anchor">#</a> 3.5 介质访问控制</h2> <p><strong>介质访问控制（Medium Access Control，MAC）</strong> 所要完成的主要任务是，<strong>为使用介质的每个结点隔离来自同一信道上其他结点所传送的信号</strong>，以协调活动结点的传输。用来决定广播信道中信道分配的协议属于数据链路层的一个子层，称为介质访问控制子层。</p> <h3 id="信道划分介质访问控制"><a href="#信道划分介质访问控制" class="header-anchor">#</a> 信道划分介质访问控制</h3> <p>信道划分介质访问控制将使用介质的每个设备与来自同一通信信道上的其他设备的通信隔离开来，把时域和频域资源合理地分配给网络上的设备。</p> <div id="频分多路复用（fdm）" class="anchor">频分多路复用（FDM）</div><p>频分多路复用：将多路基带信号调制到 <strong>不同频率载波</strong> 上，再叠加形成一个复合信号的多路复用技术。</p> <p>在物理信道的可用带宽超过单个原始信号所需带宽的情况下，可将该物理信道的总带宽分割成若干与传输单个信号带宽相同（或略宽）的子信道，每个子信道传输一种信号，这就是频分多路复用。</p> <div id="时分多路复用（tdm）" class="anchor">时分多路复用（TDM）</div><p>时分多路复用：将一条物理信道 <strong>按时间分成若干时间片</strong>，轮流地分配给多个信号使用。</p> <p>每个时间片由复用的一个信号占用，而不像 FDM 那样，同一时间同时发送多路信号。这样，利用每个信号在时间上的交叉，就可以在一条物理信道上传输多个信号。</p> <p>统计时分多路复用（STDM，又称异步时分多路复用）是 TDM 的一种改进，它采用 STDM 帧，STDM 帧并不固定分配时隙，而按需动态地分配时隙，当终端有数据要传送时，才会分配到时间片，因此可以提高线路的利用率。</p> <div id="波分多路复用（wdm）" class="anchor">波分多路复用（WDM）</div><p>波分多路复用：<strong>即光的频分多路复用</strong>，它在一根光纤中传输多种不同波长（频率）的光信号，由于波长（频率）不同，各路光信号互不干扰，最后再用波长分解复用器将各路波长分解出来。</p> <div id="码分多路复用（cdm）" class="anchor">码分多路复用（CDM）</div><p>码分多路复用：<strong>采用不同的编码</strong> 来区分各路原始信号的一种复用方式。与 FDM 和 TDM 不同，它既共享信道的频率，又共享时间。</p> <p>实际上，更常用的名词是 <strong>码分多址（Code Division Multiple Access，CDMA）</strong>，其原理是每个比特时间再划分成 m 个短的时间槽，称为码片（Chip）。每个站点被指派一个唯一的 m 位码片序列。<strong>发送 1 时，站点发送它的码片序列；发送 0 时，站点发送该码片序列的反码</strong>。当两个或多个站点 <strong>同时发送时，各路数据在信道中线性相加</strong>。为从信道中分离出各路信号，要求各个站点的码片序列相互正交。</p> <blockquote><p>假如站点 A 的码片序列被指派为 00011011，则 A 站发送 00011011 就表示发送比特 1，发送 11100100 就表示发送比特 0。为了方便，按惯例将码片中的 0 写为 -1，将 1 写为 +1，因此 A 站的码片序列是 -1-1-1+1+1-1+1+1。</p> <p>令向量 S 表示 A 站的码片向量，令 T 表示 B 站的码片向量。两个不同站的码片序列正交，即向量 S 和 T 的规格化内积（Inner Product） 为 0：</p> <section><div class="vuepress-eqn"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>⋅</mo><mi>T</mi><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msub><mi>S</mi><mi>i</mi></msub><msub><mi>T</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">
S \cdot T = \frac { 1 } { m } \sum _ { i = 1 } ^ { m } S _ { i } T _ { i } = 0
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span></div></section><p>任何一个码片向量和该码片向量自身的规格化内积都是 1，任何一个码片向量和该码片反码的向量的规格化内积是 -1。</p> <p><strong>例</strong>：A 站码片 00011011、B 站码片 00101110。此时 A、B 站向量相乘内积为 0。</p> <p>当 A 站向 C 站发送数据 1 时，就发送了向量 (-1-1-1+1+1-1+1+1)；</p> <p>当 B 站向 C 站发送数据 0 时，就发送了向量 (+1+1-1+1-1-1-1+1)。</p> <p>两个向量到了公共信道上就进行叠加， 实际上就是线性相加， 得到 S + T = (0 0 -2 2 0 -2 0 2)。</p> <p>到达 C 站后，想获得 A 站数据，就与 A 站码片 S 内积化，<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi>S</mi><mo>+</mo><mi>T</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">S \cdot (S + T) = 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span>，因此 A 站数据是 1； 同理，<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi>S</mi><mo>+</mo><mi>T</mi><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">T \cdot (S + T) = -1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></span>，B 站发过来的向量是一个反码向量，代表 0。</p></blockquote> <h3 id="随机访问介质访问控制"><a href="#随机访问介质访问控制" class="header-anchor">#</a> 随机访问介质访问控制</h3> <div id="aloha-协议" class="anchor">ALOHA 协议</div><p><strong>ALOHA 协议</strong>：当网络中的任何一个站点需要发送数据时可以 <strong>不进行任何检测就发送数据</strong>。如果在一段时间内未收到确认，那么该站点就认为传输过程中发生了冲突。发送站点需要等待一段时间后再发送数据，直至发送成功。</p> <p><strong>时隙 ALOHA 协议</strong>：把所有各站在时间上同步起来，并将时间划分为一段段等长的时隙，规定只能在每个时隙开始时才能发送一个帧。从而避免了用户发送数据的随意性，减少了数据产生冲突的可能性，提高了信道的利用率。</p> <div id="csma-协议" class="anchor">CSMA 协议</div><p>若每个站点在发送前 <strong>都先侦听一下共用信道，发现信道空闲后再发送</strong>，就会大大降低冲突的可能，从而提高信道利用率，<strong>载波侦听多路访问（Carrier Sense Multiple Access, CSMA）协议</strong> 基于这一思想。</p> <ul><li><strong>1-坚持 CSMA</strong>  ：一个结点要发送数据时，首先侦听信道；如果信道空闲，那么立即发送数据；<strong>如果信道忙，那么等待，同时继续侦听直至信道空闲</strong>；如果发生冲突，那么随机等待一段时间后，再重新开始侦听信道。</li></ul> <blockquote><p>传播延迟对 1-坚持 CSMA 协议的性能影响较大。例如，结点 A 开始发送数据时，结点 B 正好有数据要发送，但这时结点 A 发出数据的信号还未到达结点 B，结点 B 侦听到信道空闲，于是立即发送数据，结果必然导致冲突。</p> <p>即使不考虑延迟，1-坚持 CSMA 协议也可能产生冲突。例如，结点 A 正在发送数据时，结点 B 和 C 也准备发送数据，侦听到信道忙，于是坚持侦听，结果当结点 A 一发送完毕，结点 B 和 C 就会立即发送数据，同样导致冲突。</p></blockquote> <ul><li><p><strong>非坚持 CSMA</strong>：一个结点要发送数据时，首先侦听信道；如果信道空闲，那么立即发送数据；<strong>如果信道忙，那么放弃侦听</strong>，等待一个随机的时间后再重复上述过程。</p></li> <li><p><strong><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span></span>-坚持 CSMA</strong>：一个结点要发送数据时，首先侦听信道；<strong>如果信道忙，就持续侦听，直至信道空闲</strong>；<strong>如果信道空闲，那么以概率 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span></span> 发送数据，以概率 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">1-p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span></span> 推迟到下一个时隙</strong>；如果在下一个时隙信道仍然空闲，那么仍以概率 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span></span> 发送数据，以概率 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">1-p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span></span> 推迟到下一个时隙；这个过程一直持续到数据发送成功或因其他结点发送数据而检测到信道忙为止，若是后者，则等待下一个时隙再重新开始侦听。</p></li></ul> <div id="csma-cd-协议" class="anchor">CSMA/CD 协议</div><p><strong>载波侦听多路访问/碰撞检测（Carrier Sense Multiple Access with Collision Detection, CSMA/CD）协议</strong> 是 CSMA 协议的改进方案，适用于总线形网络或半双工网络环境。</p> <ul><li>“载波侦听” 就是 <strong>发送前先侦听</strong>，即每个站在发送数据之前先要检测一下总线上是否有其他站点正在发送数据，若有则暂时不发送数据，等待信道变为空闲时再发送。</li> <li>“碰撞检测” 就是 <strong>边发送边侦听</strong>，即适配器边发送数据边检测信道上信号电压的变化情况，以便判断自己在发送数据时其他站点是否也在发送数据。</li></ul> <p><img src="/note-pages/assets/img/image-20240117213203813.fa27860d.png" alt="image-20240117213203813"></p> <p>CSMA/CD 的工作流程：<strong>先听后发，边听边发，冲突停发，随机重发。</strong></p> <ul><li>适配器从网络层获得一个分组，封装成以太网帧，放入适配器的缓存，准备发送。</li> <li>如果适配器侦听到信道空闲，那么它开始发送该帧。如果适配器侦听到信道忙，那么它持续侦听，直至信道上没有信号能量，然后开始发送该帧。</li> <li>在发送过程中，适配器持续检测信道。若一直未检测到碰撞，则顺利地把这个帧发送完毕。若检测到碰撞，则中止数据的发送，并发送一个拥塞信号，以让所有用户都知道。</li> <li>在中止发送后，适配器就执行指数退避算法，等待一段随机时间后返回到步骤 2。</li></ul> <div id="csma-ca-协议" class="anchor">CSMA/CA 协议</div><p>为此，802.11 标准定义了广泛应用于无线局域网的 CSMA/CA 协议，它对 CSMA/CD 协议进行了修改，把碰撞检测改为 <strong>碰撞避免（Collision Avoidance，CA）</strong>。</p> <blockquote><p>“碰撞避免” 并不是指可以完全避免碰撞，而是指协议的设计要尽量降低碰撞发生的概率。</p></blockquote> <p>CSMA/CA 的工作流程：</p> <ul><li>若站点最初有数据要发送（而不是发送不成功再进行重传)，且检测到信道空闲，在等待时间 DIFS 后，就发送整个数据帧。</li> <li>否则，站点执行 CSMA/CA 退避算法，选取一个随机回退值。一旦检测到信道忙，退避计时器就保持不变。只要信道空闲，退避计时器就进行倒计时。</li> <li>当退避计时器减到 0 时（这时信道只可能是空闲的)，站点就发送整个帧并等待确认。</li> <li>发送站若收到确认，则已发送的帧被目的站正确接收。这时如果要发送第二帧，就要从步骤 2 开始。</li></ul> <p>为了避免该问题，802.11 允许发送站对信道进行预约。源站要发送数据帧之前先广播一个很短的请求发送 RTS（Request To Send）控制帧，它包括源地址、目的地址和这次通信（含相应的确认帧）所持续的时间，该帧能被其范围内包括 AP 在内的所有站点听到。若信道空闲，则 AP 广播一个允许发送 CTS（Clear To Send）控制帧，它包括这次通信所需的持续时间（从RTS 帧复制），该帧也能被其范围内的所有站点听到。 其他站听到 CTS 后，在 CTS 帧中指明的时间内将抑制发送。</p> <blockquote><p>CSMA/CA 协议的基本思想是在 <strong>发送数据时先广播告知其他结点</strong>，让其他结点在某段时间内不要发送数据，<strong>以免出现碰撞</strong>。</p> <p>CSMA/CD 协议的基本思想是发送前侦听，边发送边侦听一旦出现碰撞马上停止发送。</p></blockquote> <h3 id="轮询访问-令牌传递协议"><a href="#轮询访问-令牌传递协议" class="header-anchor">#</a> 轮询访问：令牌传递协议</h3> <p>在轮询访问中，用户不能随机地发送信息，而要通过一个集中控制的监控站，以循环方式轮询每个结点，再决定信道的分配。当某结点使用信道时，其他结点都不能使用信道。</p> <p>典型的轮询访问介质访问控制协议是 <strong>令牌传递协议</strong>，它主要用在令牌环局域网中。</p> <p><strong>在令牌传递协议中，一个令牌（Token）沿着环形总线在各结点计算机间依次传递</strong>。令牌是一个特殊的 MAC 控制帧，它本身并不包含信息，仅控制信道的使用，确保同一时刻只有一个站点独占信道。<strong>当环上的一个站点希望传送帧时，必须等待令牌。一旦收到令牌，站点便可启动发送帧。</strong></p> <p><strong>站点只有取得令牌后才能发送数据帧</strong>，因此令牌环网不会发生碰撞。站点在发送完一帧后，应释放令牌，以便让其他站使用。令牌在网环上是按顺序依次传递的，因此对所有入网计算机而言，访问权是公平的。</p> <p>当计算机都不需要发送数据时，令牌就在环形网上游荡，而需要发送数据的计算机只有在拿到该令牌后才能发送数据帧，因此不会发送冲突（因为令牌只有一个）。</p> <p>在令牌传递网络中，传输介质的物理拓扑不必是一个环，但是为了把对介质访问的许可从一个设备传递到另一个设备，令牌在设备间的传递通路逻辑上必须是一个环。</p> <h2 id="_3-6-局域网"><a href="#_3-6-局域网" class="header-anchor">#</a> 3.6 局域网</h2> <h3 id="局域网的基本概念和体系结构"><a href="#局域网的基本概念和体系结构" class="header-anchor">#</a> 局域网的基本概念和体系结构</h3> <p><strong>局域网（Local Area Network, LAN）</strong> 是指在一个较小的地理范围内，将各种计算机、外部设备和数据库系统等通过双绞线、同轴电缆等连接介质互相连接起来，组成资源和信息共享的计算机互联网络。</p> <p>局域网的特性主要由三个要素决定：<strong>拓扑结构、传输介质、介质访问控制方式</strong>，其中最重要的是介质访问控制方式，它决定着局域网的技术特性。</p> <p>常见的局域网 <strong>拓扑结构</strong> 主要有以下 4 大类：</p> <p><img src="/note-pages/assets/img/image-20221112223827948.c0428ce5.png" alt="image-20221112223827948"></p> <p><strong>有线局域网常用介质</strong>：双绞线、同轴电缆、光纤；<strong>无线局域网常用介质</strong>：电磁波。</p> <p>局域网的 <strong>介质访问控制方法</strong> 主要有 CSMA/CD、令牌总线和令牌环，其中前两种方法主要用于总线形局域网，令牌环主要用于环形局域网。</p> <p><strong>三种特殊的局域网拓扑实现如下：</strong></p> <ul><li>以太网。逻辑拓扑是 <strong>总线形结构</strong>，物理拓扑是星形或拓展星形结构。</li> <li>令牌环。逻辑拓扑是 <strong>环形结构</strong>，物理拓扑是星形结构。</li> <li>FDDI（光纤分布数字接口，IEEE 802.8）。逻辑拓扑是环形结构，物理拓扑是双环结构。</li></ul> <p>IEEE 802 标准定义的局域网参考模型只对应于 OSI 参考模型的数据链路层和物理层，并将数据链路层拆分为两个子层：<strong>逻辑链路控制（LLC）子层</strong> 和 <strong>媒体接入控制（MAC）子层</strong>。</p> <p>与接入传输媒体有关的内容都放在 MAC 子层，它向上层屏蔽对物理层访问的各种差异，提供对物理层的统一访问接口，主要功能包括：组帧和拆卸帧、比特传输差错检测、透明传输。</p> <p>LLC 子层与传输媒体无关，它向网络层提供无确认无连接、面向连接、带确认无连接、高速传送 4 种不同的连接服务类型。</p> <p><img src="/note-pages/assets/img/image-20221112224938579.6b641b39.png" alt="image-20221112224938579"></p> <h3 id="以太网"><a href="#以太网" class="header-anchor">#</a> 以太网</h3> <p>严格来说，以太网应当是指符合 DIX Ethernet V2 标准的局域网，但 DIX Ethernet V2 标准与 IEEE 802.3 标准只有很小的差别，因此通常将 802.3 局域网简称为 <strong>以太网</strong>。</p> <p>以太网采用两项措施以简化通信：</p> <ul><li>采用 <strong>无连接</strong> 的工作方式，不对发送的数据帧编号，也不要求接收方发送确认，即以太网 <strong>尽最大努力交付</strong> 数据，提供的是 <strong>不可靠</strong> 服务，对于差错的纠正则由高层完成；</li> <li>发送的数据都使用 <strong>曼彻斯特编码</strong> 的信号，每个码元的中间出现一次电压转换，接收端利用这种电压转换方便地把位同步信号提取出来。</li></ul> <div id="以太网的-mac-帧" class="anchor">以太网的 MAC 帧</div><p>网卡中的 MAC 地址又称为 <strong>物理地址</strong>。MAC 地址长 6 字节，一般用由连字符（或冒号）分隔的 12 个十六进制数表示，如 02-60-8c-e4-b1-21。高 24 位为厂商代码，低 24 位为厂商自行分配的网卡序列号。</p> <p><strong>以太网 V2 的 MAC 帧格式：</strong></p> <p><img src="/note-pages/assets/img/image-20221112230256096.901facfd.png" alt="image-20221112230256096"></p> <ul><li><strong>前导码</strong>：使接收端与发送端时钟同步。帧前插入的 8 字节可再分为两个字段：第一个字段共 7 字节，是前同步码，以实现 MAC 帧的比特同步；第二个字段是帧开始定界符，表示后面的信息是 MAC 帧。</li> <li><strong>地址</strong>： 通常使用 6 字节（48 bit）地址（MAC 地址）。</li> <li><strong>类型</strong>：2 字节，指出数据域中携带的数据应交给哪个协议实体处理。</li> <li><strong>数据</strong>：46~1500 字节，包含高层的协议消息。<strong>由于 CSMA/CD 算法的限制，以太网 MAC 帧必须满足最小长度要求 64 字节</strong>，数据较少时必须加以填充。</li> <li><strong>帧检验序列（FCS）</strong>：4 字节，检验范围从目的地址段到数据段末尾，算法采用 32 位循环冗余码（CRC），不但要检验 MAC 帧的数据部分，还要检验目的地址、源地址和类型字段。不校验前导码。</li></ul> <div id="高速以太网" class="anchor">高速以太网</div><p>速率达到或超过 100Mb/s 的以太网称为高速以太网。</p> <h3 id="无线局域网"><a href="#无线局域网" class="header-anchor">#</a> 无线局域网</h3> <div id="局域网的-mac-帧" class="anchor">局域网的 MAC 帧</div><p><img src="/note-pages/assets/img/image-20221112232622548.e5bcd9b1.png" alt="image-20221112232622548"></p> <h2 id="_3-7-广域网"><a href="#_3-7-广域网" class="header-anchor">#</a> 3.7 广域网</h2> <h3 id="广域网的基本概念"><a href="#广域网的基本概念" class="header-anchor">#</a> 广域网的基本概念</h3> <p>广域网通常是指覆盖范围很广（ 远超一个城市的范围）的长距离网络。广域网是因特网的核心部分，其任务是长距离运送主机所发送的数据。</p> <p><img src="/note-pages/assets/img/image-20221112233322328.b1bc6355.png" alt="image-20221112233322328"></p> <h3 id="ppp-协议"><a href="#ppp-协议" class="header-anchor">#</a> PPP 协议</h3> <p>PPP（Point-to-Point Protocol）是使用串行线路通信的 <strong>面向字节</strong> 的协议，该协议应用在直接连接两个结点的链路上。设计的目的主要是用来通过拨号或专线方式建立点对点连接发送数据，使其成为各种主机、网桥和路由器之间简单连接的一种共同的解决方案。</p> <p><strong>PPP 协议有三个组成部分：</strong></p> <ul><li>链路控制协议（LCP）。一种扩展链路控制协议，用于建立、配置、测试和管理数据链路。</li> <li>网络控制协议（NCP）。PPP 协议允许同时采用多种网络层协议，每个不同的网络层协议要用一个相应的 NCP 来配置，为网络层协议建立和配置逻辑连接。</li> <li>一个将 IP 数据报封装到串行链路的方法。 IP 数据报在 PPP 帧中就是其信息部分，这个信息部分的长度受最大传送单元（MTU）的限制。</li></ul> <p><strong>PPP 帧的格式：</strong></p> <p><img src="/note-pages/assets/img/image-20221112234016959.d8599e0d.png" alt="image-20221112234016959"></p> <ul><li><strong>标志字段（F）</strong>：帧定界符为 7E（01111110），前后各占 1 字节，若它出现在信息字段中，就必须插入转义字符 7D（01111101）。</li> <li><strong>地址（A）</strong>：占 1 字节， 规定为 0xFF，内容始终是固定不变的。</li> <li><strong>控制字段（C）</strong>：占 1 字节， 规定为 0x03，内容始终是固定不变的。</li> <li><strong>协议段</strong>：占 2 字节， 说明信息段中运载的是什么种类的分组。</li> <li><strong>信息段</strong>：长度是可变的，大于等于 0 且小于等于 1500B。 为了实现透明传输， 当信息段中出现和标志字段一样的比特组合时， 必须釆用一些措施来改进。</li> <li><strong>帧检验序列（FCS）</strong>：占 2 字节，即循环冗余码检验中的冗余码。检验区包括地址字段、控制字段、协议字段和信息字段。</li></ul> <h3 id="hdlc-协议"><a href="#hdlc-协议" class="header-anchor">#</a> HDLC 协议</h3> <p><strong>高级数据链路控制（HDLC）协议</strong> 是 <strong>面向比特</strong> 的数据链路层协议。</p> <ul><li>HDLC 协议不依赖于任何一种字符编码集：实现透明传输的 <strong>“零比特插入法”</strong> 易于硬件实现；</li> <li><strong>全双工通信</strong>，有较高的数据链路传输效率；</li> <li>对全部帧采用 <strong>CRC 检验</strong>，对信息帧进行顺序编号，可防止漏收或重发，传输可靠性高；</li> <li>传输控制功能与处理功能分离，具有较大的灵活性。</li></ul> <h2 id="_3-8-数据链路层设备"><a href="#_3-8-数据链路层设备" class="header-anchor">#</a> 3.8 数据链路层设备</h2> <h3 id="网桥"><a href="#网桥" class="header-anchor">#</a> 网桥</h3> <p>两个或多个以太网通过网桥连接后，就成为一个更大的以太网，而原来的每个以太网就称为一个网段。网桥工作在链路层的 MAC 子层，可以使以太网各网段成为 <strong>隔离开的碰撞域</strong>。</p> <p>网桥根据 MAC 帧的目的地址对帧进行转发和过滤。当网桥收到一个帧时，并不向所有接口转发此帧，而是先检查此帧的目的 MAC 地址，然后再确定将该帧转发到哪一个接口，或者是把它丢弃（即过滤） 。</p> <h3 id="局域网交换机"><a href="#局域网交换机" class="header-anchor">#</a> 局域网交换机</h3> <p>局域网交换机， 又称以太网交换机， 以太网交换机实质上就是一个 <strong>多端口的网桥</strong>， 工作在数据链路层。</p> <p>以太网交换机的每个端口直接与单台主机或另一个交换机相连，通常都工作在全双工方式。</p> <p><strong>原理</strong>：检测从以太端口来的数据帧的源和目的地的 MAC 地址，然后与系统内部的动态查找表进行比较，若数据帧的 MAC 地址不在查找表中，则将该地址加入查找表中，并将数据帧发送给相应的目的端口。</p> <p>交换机能经济地将网络分成小的冲突域， 为每个工作站提供更高的带宽。</p> <blockquote><p>对于传统 10Mb/s 的共享式以太网，若共有 N 个用户，则每个用户占有的平均带宽只有总带宽的 1/N。</p> <p>使用交换机时，每个端口到主机的带宽还是 10Mb/s，用户在通信时是 <strong>独占</strong> 而不是和其他网络用户共享传输媒体的带宽，因此拥有 N 个端口的交换机的总容量为 N×10Mb/s。</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note-pages/network/02-物理层.html" class="prev">
        第2章 物理层
      </a></span> <span class="next"><a href="/note-pages/network/otgrds/">
        第4章 网络层
      </a>
      →
    </span></p></div> </main> <aside items="[object Object],[object Object],[object Object],[object Object],[object Object],[object Object]" class="right-sidebar"><div style="margin-left:20px; margin-bottom: 10px; text-align: center; font-size:16px;font-weight:bold;">此页内容</div> <div class="right-sidebar-wrap"><ul class="right-sidebar-links"><li id="tab-item0" class="right-sidebar-item active"><a href="#_3-1-数据链路层功能概述" class="right-sidebar-item-level2">
          3.1 数据链路层功能概述
        </a></li><li id="tab-item1" class="right-sidebar-item"><a href="#基本任务" class="right-sidebar-item-level3">
          基本任务
        </a></li><li id="tab-item2" class="right-sidebar-item"><a href="#功能" class="right-sidebar-item-level3">
          功能
        </a></li><li id="tab-item3" class="right-sidebar-item"><a href="#_3-2-封装成帧" class="right-sidebar-item-level2">
          3.2 封装成帧
        </a></li><li id="tab-item4" class="right-sidebar-item"><a href="#字符计数法" class="right-sidebar-item-level3">
          字符计数法
        </a></li><li id="tab-item5" class="right-sidebar-item"><a href="#字符填充的首尾定界符法" class="right-sidebar-item-level3">
          字符填充的首尾定界符法
        </a></li><li id="tab-item6" class="right-sidebar-item"><a href="#零比特填充的首尾标志法" class="right-sidebar-item-level3">
          零比特填充的首尾标志法
        </a></li><li id="tab-item7" class="right-sidebar-item"><a href="#违规编码法" class="right-sidebar-item-level3">
          违规编码法
        </a></li><li id="tab-item8" class="right-sidebar-item"><a href="#_3-3-差错控制" class="right-sidebar-item-level2">
          3.3 差错控制
        </a></li><li id="tab-item9" class="right-sidebar-item"><a href="#检错编码" class="right-sidebar-item-level3">
          检错编码
        </a></li><li id="tab-item10" class="right-sidebar-item"><a href="#纠错编码" class="right-sidebar-item-level3">
          纠错编码
        </a></li><li id="tab-item11" class="right-sidebar-item"><a href="#_3-4-流量控制与可靠传输机制" class="right-sidebar-item-level2">
          3.4 流量控制与可靠传输机制
        </a></li><li id="tab-item12" class="right-sidebar-item"><a href="#流量控制、可靠传输与滑动窗口机制" class="right-sidebar-item-level3">
          流量控制、可靠传输与滑动窗口机制
        </a></li><li id="tab-item13" class="right-sidebar-item"><a href="#停止-等待协议" class="right-sidebar-item-level3">
          停止-等待协议
        </a></li><li id="tab-item14" class="right-sidebar-item"><a href="#后退-n-帧协议-gbn" class="right-sidebar-item-level3">
          后退 N 帧协议（GBN）
        </a></li><li id="tab-item15" class="right-sidebar-item"><a href="#选择重传协议-sr" class="right-sidebar-item-level3">
          选择重传协议（SR）
        </a></li><li id="tab-item16" class="right-sidebar-item"><a href="#_3-5-介质访问控制" class="right-sidebar-item-level2">
          3.5 介质访问控制
        </a></li><li id="tab-item17" class="right-sidebar-item"><a href="#信道划分介质访问控制" class="right-sidebar-item-level3">
          信道划分介质访问控制
        </a></li><li id="tab-item18" class="right-sidebar-item"><a href="#随机访问介质访问控制" class="right-sidebar-item-level3">
          随机访问介质访问控制
        </a></li><li id="tab-item19" class="right-sidebar-item"><a href="#轮询访问-令牌传递协议" class="right-sidebar-item-level3">
          轮询访问：令牌传递协议
        </a></li><li id="tab-item20" class="right-sidebar-item"><a href="#_3-6-局域网" class="right-sidebar-item-level2">
          3.6 局域网
        </a></li><li id="tab-item21" class="right-sidebar-item"><a href="#局域网的基本概念和体系结构" class="right-sidebar-item-level3">
          局域网的基本概念和体系结构
        </a></li><li id="tab-item22" class="right-sidebar-item"><a href="#以太网" class="right-sidebar-item-level3">
          以太网
        </a></li><li id="tab-item23" class="right-sidebar-item"><a href="#无线局域网" class="right-sidebar-item-level3">
          无线局域网
        </a></li><li id="tab-item24" class="right-sidebar-item"><a href="#_3-7-广域网" class="right-sidebar-item-level2">
          3.7 广域网
        </a></li><li id="tab-item25" class="right-sidebar-item"><a href="#广域网的基本概念" class="right-sidebar-item-level3">
          广域网的基本概念
        </a></li><li id="tab-item26" class="right-sidebar-item"><a href="#ppp-协议" class="right-sidebar-item-level3">
          PPP 协议
        </a></li><li id="tab-item27" class="right-sidebar-item"><a href="#hdlc-协议" class="right-sidebar-item-level3">
          HDLC 协议
        </a></li><li id="tab-item28" class="right-sidebar-item"><a href="#_3-8-数据链路层设备" class="right-sidebar-item-level2">
          3.8 数据链路层设备
        </a></li><li id="tab-item29" class="right-sidebar-item"><a href="#网桥" class="right-sidebar-item-level3">
          网桥
        </a></li><li id="tab-item30" class="right-sidebar-item"><a href="#局域网交换机" class="right-sidebar-item-level3">
          局域网交换机
        </a></li></ul></div></aside></div><div class="global-ui"></div></div>
    <script src="/note-pages/assets/js/app.05dcbd87.js" defer></script><script src="/note-pages/assets/js/3.4a2f67fd.js" defer></script><script src="/note-pages/assets/js/2.ab82720e.js" defer></script><script src="/note-pages/assets/js/9.3209071f.js" defer></script>
  </body>
</html>
